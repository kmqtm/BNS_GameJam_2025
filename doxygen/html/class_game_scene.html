<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ShinkaiSanta - Source Code Documentation by Kanta Muramatsu: GameScene クラス</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mystyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ShinkaiSanta - Source Code Documentation by Kanta Muramatsu
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 構築: Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','検索',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('class_game_scene.html','','class_game_scene-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">読み取り中…</div>
<div class="SRStatus" id="Searching">検索中…</div>
<div class="SRStatus" id="NoMatches">一致する文字列を見つけられません</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">GameScene クラス</div></div>
</div><!--header-->
<div class="contents">

<p>ゲームシーンを管理する  
 <a href="#details">[詳解]</a></p>

<p><code>#include &lt;<a class="el" href="_game_scene_8h_source.html">GameScene.h</a>&gt;</code></p>
<div class="dynheader">
GameScene の継承関係図</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="class_game_scene__inherit__graph.svg" width="104" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">凡例</a>]</span></center></div>
<div class="dynheader">
GameScene 連携図</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="class_game_scene__coll__graph.svg" width="979" height="334"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">凡例</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
公開メンバ関数</h2></td></tr>
<tr class="memitem:aa0fa2a98f139524a96ffb9d25252b145" id="r_aa0fa2a98f139524a96ffb9d25252b145"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa0fa2a98f139524a96ffb9d25252b145">GameScene</a> (const InitData &amp;init)</td></tr>
<tr class="memdesc:aa0fa2a98f139524a96ffb9d25252b145"><td class="mdescLeft">&#160;</td><td class="mdescRight">コンストラクタ  <br /></td></tr>
<tr class="memitem:a921b4236d2a999c3b5edd8fe1d9086e1" id="r_a921b4236d2a999c3b5edd8fe1d9086e1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a921b4236d2a999c3b5edd8fe1d9086e1">~GameScene</a> () override</td></tr>
<tr class="memdesc:a921b4236d2a999c3b5edd8fe1d9086e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">デストラクタ  <br /></td></tr>
<tr class="memitem:a70464c5d4ccd05d39a9cb168e332c93a" id="r_a70464c5d4ccd05d39a9cb168e332c93a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a70464c5d4ccd05d39a9cb168e332c93a">update</a> () override</td></tr>
<tr class="memdesc:a70464c5d4ccd05d39a9cb168e332c93a"><td class="mdescLeft">&#160;</td><td class="mdescRight">シーンを更新する  <br /></td></tr>
<tr class="memitem:a9412458ba13451e343dd83b48c7eef13" id="r_a9412458ba13451e343dd83b48c7eef13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9412458ba13451e343dd83b48c7eef13">draw</a> () const override</td></tr>
<tr class="memdesc:a9412458ba13451e343dd83b48c7eef13"><td class="mdescLeft">&#160;</td><td class="mdescRight">シーンを描画する  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pri-methods" class="groupheader"><a id="pri-methods" name="pri-methods"></a>
非公開メンバ関数</h2></td></tr>
<tr class="memitem:a2ed65c70bb08a871fb40b321bfa59457" id="r_a2ed65c70bb08a871fb40b321bfa59457"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2ed65c70bb08a871fb40b321bfa59457">SpawnEntities</a> ()</td></tr>
<tr class="memdesc:a2ed65c70bb08a871fb40b321bfa59457"><td class="mdescLeft">&#160;</td><td class="mdescRight">エンティティをスポーンする  <br /></td></tr>
<tr class="memitem:ad736ded9ab220b8f39601204775908ff" id="r_ad736ded9ab220b8f39601204775908ff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad736ded9ab220b8f39601204775908ff">OnPlayerDied</a> ()</td></tr>
<tr class="memdesc:ad736ded9ab220b8f39601204775908ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">プレイヤーが死亡した時の処理  <br /></td></tr>
<tr class="memitem:a023567377dcb2a8caadf8f6cab2cb4a4" id="r_a023567377dcb2a8caadf8f6cab2cb4a4"><td class="memItemLeft" align="right" valign="top">Vec2&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a023567377dcb2a8caadf8f6cab2cb4a4">FindNearestRespawnSpot</a> () const</td></tr>
<tr class="memdesc:a023567377dcb2a8caadf8f6cab2cb4a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">最も近いリスポーン地点を探索する  <br /></td></tr>
<tr class="memitem:a90075ad52095e3d625ae3aa13fada7e8" id="r_a90075ad52095e3d625ae3aa13fada7e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a90075ad52095e3d625ae3aa13fada7e8">UpdateBGM</a> ()</td></tr>
<tr class="memdesc:a90075ad52095e3d625ae3aa13fada7e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">BGMを更新する  <br /></td></tr>
<tr class="memitem:a1717f5abe6408c41d43fc54a5e2c5314" id="r_a1717f5abe6408c41d43fc54a5e2c5314"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1717f5abe6408c41d43fc54a5e2c5314">StartOrDeferBGM</a> (const String &amp;asset, bool loop)</td></tr>
<tr class="memdesc:a1717f5abe6408c41d43fc54a5e2c5314"><td class="mdescLeft">&#160;</td><td class="mdescRight">BGM再生を開始または遅延させる  <br /></td></tr>
<tr class="memitem:aa563b355724487c1568bd4ab41c4d95d" id="r_aa563b355724487c1568bd4ab41c4d95d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa563b355724487c1568bd4ab41c4d95d">ProcessPendingBGM</a> ()</td></tr>
<tr class="memdesc:aa563b355724487c1568bd4ab41c4d95d"><td class="mdescLeft">&#160;</td><td class="mdescRight">保留中のBGM再生を処理する  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pri-attribs" class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
非公開変数類</h2></td></tr>
<tr class="memitem:a6fbc09fbe0d70c9dd0eb4e54f868b0ed" id="r_a6fbc09fbe0d70c9dd0eb4e54f868b0ed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_stage.html">Stage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6fbc09fbe0d70c9dd0eb4e54f868b0ed">stage_</a> { U&quot;asset/<a class="el" href="class_stage.html">Stage</a>/v3/tilemap_v3.json&quot;, U&quot;asset/<a class="el" href="class_stage.html">Stage</a>/v3/tileset.png&quot;, U&quot;collision_layer&quot; }</td></tr>
<tr class="memdesc:a6fbc09fbe0d70c9dd0eb4e54f868b0ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">ステージ  <br /></td></tr>
<tr class="memitem:ae02f3fc820bd84d4ecaadaf2737e3e3e" id="r_ae02f3fc820bd84d4ecaadaf2737e3e3e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_camera_system.html">CameraSystem</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae02f3fc820bd84d4ecaadaf2737e3e3e">camera_manager_</a></td></tr>
<tr class="memdesc:ae02f3fc820bd84d4ecaadaf2737e3e3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">カメラシステム  <br /></td></tr>
<tr class="memitem:a946044ac0695cd89013dd6c22335f394" id="r_a946044ac0695cd89013dd6c22335f394"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_player.html">Player</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a946044ac0695cd89013dd6c22335f394">player_</a></td></tr>
<tr class="memdesc:a946044ac0695cd89013dd6c22335f394"><td class="mdescLeft">&#160;</td><td class="mdescRight">プレイヤー  <br /></td></tr>
<tr class="memitem:aa4789bb9a02b48fc4facf16962ca4a75" id="r_aa4789bb9a02b48fc4facf16962ca4a75"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_game_scene_8h.html#a7899b65f1ea0f655e4bbf8d2a5714285">GameState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa4789bb9a02b48fc4facf16962ca4a75">current_state_</a> = <a class="el" href="_game_scene_8h.html#a7899b65f1ea0f655e4bbf8d2a5714285ab78a3223503896721cca1303f776159b">GameState::Title</a></td></tr>
<tr class="memdesc:aa4789bb9a02b48fc4facf16962ca4a75"><td class="mdescLeft">&#160;</td><td class="mdescRight">現在のゲーム状態  <br /></td></tr>
<tr class="memitem:afce5ddb19d7e812786caad6456fbf97a" id="r_afce5ddb19d7e812786caad6456fbf97a"><td class="memItemLeft" align="right" valign="top">s3d::Array&lt; <a class="el" href="class_enemy.html">Enemy</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afce5ddb19d7e812786caad6456fbf97a">enemies_</a></td></tr>
<tr class="memdesc:afce5ddb19d7e812786caad6456fbf97a"><td class="mdescLeft">&#160;</td><td class="mdescRight">敵のリスト  <br /></td></tr>
<tr class="memitem:a09e7b014bdd0405bb6b240282b490d1e" id="r_a09e7b014bdd0405bb6b240282b490d1e"><td class="memItemLeft" align="right" valign="top">s3d::Array&lt; <a class="el" href="class_oxygen_spot.html">OxygenSpot</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a09e7b014bdd0405bb6b240282b490d1e">oxygen_spots_</a></td></tr>
<tr class="memdesc:a09e7b014bdd0405bb6b240282b490d1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">酸素スポットのリスト  <br /></td></tr>
<tr class="memitem:a2e50b365a5b44298a88b522c2b215382" id="r_a2e50b365a5b44298a88b522c2b215382"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_collision_system.html">CollisionSystem</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2e50b365a5b44298a88b522c2b215382">collision_manager_</a></td></tr>
<tr class="memdesc:a2e50b365a5b44298a88b522c2b215382"><td class="mdescLeft">&#160;</td><td class="mdescRight">衝突判定システム  <br /></td></tr>
<tr class="memitem:aa6b380e426f6968c9fd2719b7305b350" id="r_aa6b380e426f6968c9fd2719b7305b350"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sound_controller.html">SoundController</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa6b380e426f6968c9fd2719b7305b350">bgm_controller_</a></td></tr>
<tr class="memdesc:aa6b380e426f6968c9fd2719b7305b350"><td class="mdescLeft">&#160;</td><td class="mdescRight">BGM制御  <br /></td></tr>
<tr class="memitem:a51bb879d96662711ff93191ab1396efe" id="r_a51bb879d96662711ff93191ab1396efe"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a51bb879d96662711ff93191ab1396efe">is_intro_finished_</a> = false</td></tr>
<tr class="memdesc:a51bb879d96662711ff93191ab1396efe"><td class="mdescLeft">&#160;</td><td class="mdescRight">イントロが終了したか  <br /></td></tr>
<tr class="memitem:a17bd10c9c9a893337f882ac2cc29fa2c" id="r_a17bd10c9c9a893337f882ac2cc29fa2c"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a17bd10c9c9a893337f882ac2cc29fa2c">pending_bgm_asset_</a></td></tr>
<tr class="memdesc:a17bd10c9c9a893337f882ac2cc29fa2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">保留中のBGMアセット名  <br /></td></tr>
<tr class="memitem:a8d18c87d67bcb9a95a199f778abf1fdd" id="r_a8d18c87d67bcb9a95a199f778abf1fdd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8d18c87d67bcb9a95a199f778abf1fdd">pending_bgm_loop_</a> = false</td></tr>
<tr class="memdesc:a8d18c87d67bcb9a95a199f778abf1fdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">保留中のBGMループフラグ  <br /></td></tr>
<tr class="memitem:a8939149550ec6173266a918dbc3c675d" id="r_a8939149550ec6173266a918dbc3c675d"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8939149550ec6173266a918dbc3c675d">current_playing_bgm_asset_</a></td></tr>
<tr class="memdesc:a8939149550ec6173266a918dbc3c675d"><td class="mdescLeft">&#160;</td><td class="mdescRight">現在再生中のBGMアセット名  <br /></td></tr>
<tr class="memitem:ad923df88ccb29eab3d1f2bc2b461e833" id="r_ad923df88ccb29eab3d1f2bc2b461e833"><td class="memItemLeft" align="right" valign="top">Vec2&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad923df88ccb29eab3d1f2bc2b461e833">player_start_pos_</a> = Vec2::Zero()</td></tr>
<tr class="memdesc:ad923df88ccb29eab3d1f2bc2b461e833"><td class="mdescLeft">&#160;</td><td class="mdescRight">プレイヤーの開始位置  <br /></td></tr>
<tr class="memitem:a15264bb76160d136a34c374410988428" id="r_a15264bb76160d136a34c374410988428"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a15264bb76160d136a34c374410988428">map_total_height_</a> = 0.0</td></tr>
<tr class="memdesc:a15264bb76160d136a34c374410988428"><td class="mdescLeft">&#160;</td><td class="mdescRight">ステージの総高さ  <br /></td></tr>
<tr class="memitem:a880152ec2737823c876cd92d531c67b9" id="r_a880152ec2737823c876cd92d531c67b9"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; String, double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a880152ec2737823c876cd92d531c67b9">background_activation_times_</a></td></tr>
<tr class="memdesc:a880152ec2737823c876cd92d531c67b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">背景オブジェクトのアクティブ化時刻  <br /></td></tr>
<tr class="memitem:a72703a1b0603a5d7e1b24629995ad14d" id="r_a72703a1b0603a5d7e1b24629995ad14d"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a72703a1b0603a5d7e1b24629995ad14d">ending_start_time_</a> = -1.0</td></tr>
<tr class="memdesc:a72703a1b0603a5d7e1b24629995ad14d"><td class="mdescLeft">&#160;</td><td class="mdescRight">エンディング開始からの経過時間  <br /></td></tr>
<tr class="memitem:ac86ef266e524e23cde48487fa5e68cbd" id="r_ac86ef266e524e23cde48487fa5e68cbd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_u_i_system.html">UISystem</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac86ef266e524e23cde48487fa5e68cbd">ui_manager_</a></td></tr>
<tr class="memdesc:ac86ef266e524e23cde48487fa5e68cbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">UIシステム  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pri-static-attribs" class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
静的非公開変数類</h2></td></tr>
<tr class="memitem:a1667d8b21db6a212188a718f85ebe73e" id="r_a1667d8b21db6a212188a718f85ebe73e"><td class="memItemLeft" align="right" valign="top">static constexpr ColorF&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1667d8b21db6a212188a718f85ebe73e">kDeepSeaColor</a> = ColorF{ 0.0, 0.1, 0.3 }</td></tr>
<tr class="memdesc:a1667d8b21db6a212188a718f85ebe73e"><td class="mdescLeft">&#160;</td><td class="mdescRight">深海の背景色  <br /></td></tr>
<tr class="memitem:a65a5770ebd2e996edcdc27cac7a69b62" id="r_a65a5770ebd2e996edcdc27cac7a69b62"><td class="memItemLeft" align="right" valign="top">static constexpr double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a65a5770ebd2e996edcdc27cac7a69b62">kTitleEndingCameraOffsetYRatio</a> = -1.0 / 4.9</td></tr>
<tr class="memdesc:a65a5770ebd2e996edcdc27cac7a69b62"><td class="mdescLeft">&#160;</td><td class="mdescRight">タイトル・エンディング画面用のカメラオフセット比率  <br /></td></tr>
<tr class="memitem:a5b0377e5605ea62f8779d2aa4f5e074f" id="r_a5b0377e5605ea62f8779d2aa4f5e074f"><td class="memItemLeft" align="right" valign="top">static constexpr double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5b0377e5605ea62f8779d2aa4f5e074f">kPlayingCameraOffsetYRatio</a> = 1.0 / 6.0</td></tr>
<tr class="memdesc:a5b0377e5605ea62f8779d2aa4f5e074f"><td class="mdescLeft">&#160;</td><td class="mdescRight">ゲームプレイ用のカメラオフセット比率  <br /></td></tr>
<tr class="memitem:af61de4ec45054c4ad819aa667e2d6aab" id="r_af61de4ec45054c4ad819aa667e2d6aab"><td class="memItemLeft" align="right" valign="top">static constexpr double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af61de4ec45054c4ad819aa667e2d6aab">kEndingZoneY</a> = 7650.0</td></tr>
<tr class="memdesc:af61de4ec45054c4ad819aa667e2d6aab"><td class="mdescLeft">&#160;</td><td class="mdescRight">エンディングに移行するY座標  <br /></td></tr>
<tr class="memitem:aae92d7d7647fb42ea773a6820baffb1d" id="r_aae92d7d7647fb42ea773a6820baffb1d"><td class="memItemLeft" align="right" valign="top">static constexpr double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aae92d7d7647fb42ea773a6820baffb1d">kOctopusSmileDelay</a> = 7.0 + 8.6</td></tr>
<tr class="memdesc:aae92d7d7647fb42ea773a6820baffb1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">エンディング開始から笑顔に切り替わるまでの時間(秒)  <br /></td></tr>
<tr class="memitem:acba19c430989f22697747e855c60cb1a" id="r_acba19c430989f22697747e855c60cb1a"><td class="memItemLeft" align="right" valign="top">static constexpr double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acba19c430989f22697747e855c60cb1a">kEndingDarkenAlpha</a> = 0.45</td></tr>
<tr class="memdesc:acba19c430989f22697747e855c60cb1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">笑顔後の画面暗転アルファ値  <br /></td></tr>
<tr class="memitem:a64b8a743a881765b83832940b6a1f18c" id="r_a64b8a743a881765b83832940b6a1f18c"><td class="memItemLeft" align="right" valign="top">static constexpr StringView&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a64b8a743a881765b83832940b6a1f18c">kEndingOverlayTexture</a> = U&quot;ending_text&quot;</td></tr>
<tr class="memdesc:a64b8a743a881765b83832940b6a1f18c"><td class="mdescLeft">&#160;</td><td class="mdescRight">エンディング画像のアセット名  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">詳解</h2>
<div class="textblock"><p>ゲームシーンを管理する </p>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">構築子と解体子</h2>
<a id="aa0fa2a98f139524a96ffb9d25252b145" name="aa0fa2a98f139524a96ffb9d25252b145"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0fa2a98f139524a96ffb9d25252b145">&#9670;&#160;</a></span>GameScene()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GameScene::GameScene </td>
          <td>(</td>
          <td class="paramtype">const InitData &amp;</td>          <td class="paramname"><span class="paramname"><em>init</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>コンストラクタ </p>
<dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">init</td><td>初期化データ </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">   10</span>    : IScene(init)</div>
<div class="line"><span class="lineno">   11</span>    , <a class="code hl_variable" href="#ae02f3fc820bd84d4ecaadaf2737e3e3e">camera_manager_</a>(</div>
<div class="line"><span class="lineno">   12</span>        (<a class="code hl_variable" href="#a6fbc09fbe0d70c9dd0eb4e54f868b0ed">stage_</a>.GetWidth()* <a class="code hl_variable" href="#a6fbc09fbe0d70c9dd0eb4e54f868b0ed">stage_</a>.GetTileSize()) / 2.0,</div>
<div class="line"><span class="lineno">   13</span>        <a class="code hl_variable" href="_config_8h.html#a3b8841eb4f4bcd8fa09fb6a8cb3394ba">kSceneSize</a></div>
<div class="line"><span class="lineno">   14</span>    )</div>
<div class="line"><span class="lineno">   15</span>    , <a class="code hl_variable" href="#a15264bb76160d136a34c374410988428">map_total_height_</a>(<a class="code hl_variable" href="#a6fbc09fbe0d70c9dd0eb4e54f868b0ed">stage_</a>.GetHeight()* <a class="code hl_variable" href="#a6fbc09fbe0d70c9dd0eb4e54f868b0ed">stage_</a>.GetTileSize())</div>
<div class="line"><span class="lineno">   16</span>{</div>
<div class="line"><span class="lineno">   17</span>    <a class="code hl_function" href="class_asset_system.html#ac182714115a88042762b2c178a6865ca">AssetSystem::GetInstance</a>().<a class="code hl_function" href="class_asset_system.html#a38216f3fc1a218b4cf6910e8ed455be9">PrepareAssets</a>(U<span class="stringliteral">&quot;Game&quot;</span>);</div>
<div class="line"><span class="lineno">   18</span> </div>
<div class="line"><span class="lineno">   19</span>    <a class="code hl_function" href="#a2ed65c70bb08a871fb40b321bfa59457">SpawnEntities</a>();</div>
<div class="line"><span class="lineno">   20</span> </div>
<div class="line"><span class="lineno">   21</span>    <a class="code hl_variable" href="#ae02f3fc820bd84d4ecaadaf2737e3e3e">camera_manager_</a>.SetTargetY(<a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.GetPos().y);</div>
<div class="line"><span class="lineno">   22</span>    <a class="code hl_variable" href="#ae02f3fc820bd84d4ecaadaf2737e3e3e">camera_manager_</a>.SetYOffsetRatio(<a class="code hl_variable" href="#a65a5770ebd2e996edcdc27cac7a69b62">kTitleEndingCameraOffsetYRatio</a>);</div>
<div class="line"><span class="lineno">   23</span> </div>
<div class="line"><span class="lineno">   24</span>    <span class="comment">//イントロBGMを再生開始（準備ができるまで保留して毎フレームチェック）</span></div>
<div class="line"><span class="lineno">   25</span>    <a class="code hl_function" href="#a1717f5abe6408c41d43fc54a5e2c5314">StartOrDeferBGM</a>(U<span class="stringliteral">&quot;deepsea_intro&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">   26</span>}</div>
<div class="ttc" id="a_config_8h_html_a3b8841eb4f4bcd8fa09fb6a8cb3394ba"><div class="ttname"><a href="_config_8h.html#a3b8841eb4f4bcd8fa09fb6a8cb3394ba">kSceneSize</a></div><div class="ttdeci">constexpr Size kSceneSize</div><div class="ttdoc">ゲームシーンのサイズ(ピクセル)</div><div class="ttdef"><b>Definition</b> Config.h:9</div></div>
<div class="ttc" id="aclass_asset_system_html_a38216f3fc1a218b4cf6910e8ed455be9"><div class="ttname"><a href="class_asset_system.html#a38216f3fc1a218b4cf6910e8ed455be9">AssetSystem::PrepareAssets</a></div><div class="ttdeci">void PrepareAssets(const String &amp;scene_name)</div><div class="ttdoc">指定したシーン名のアセットを準備する</div><div class="ttdef"><b>Definition</b> AssetSystem.cpp:56</div></div>
<div class="ttc" id="aclass_asset_system_html_ac182714115a88042762b2c178a6865ca"><div class="ttname"><a href="class_asset_system.html#ac182714115a88042762b2c178a6865ca">AssetSystem::GetInstance</a></div><div class="ttdeci">static AssetSystem &amp; GetInstance()</div><div class="ttdoc">シングルトンインスタンスを取得する</div><div class="ttdef"><b>Definition</b> AssetSystem.cpp:5</div></div>
<div class="ttc" id="aclass_game_scene_html_a15264bb76160d136a34c374410988428"><div class="ttname"><a href="#a15264bb76160d136a34c374410988428">GameScene::map_total_height_</a></div><div class="ttdeci">double map_total_height_</div><div class="ttdoc">ステージの総高さ</div><div class="ttdef"><b>Definition</b> GameScene.h:106</div></div>
<div class="ttc" id="aclass_game_scene_html_a1717f5abe6408c41d43fc54a5e2c5314"><div class="ttname"><a href="#a1717f5abe6408c41d43fc54a5e2c5314">GameScene::StartOrDeferBGM</a></div><div class="ttdeci">void StartOrDeferBGM(const String &amp;asset, bool loop)</div><div class="ttdoc">BGM再生を開始または遅延させる</div><div class="ttdef"><b>Definition</b> GameScene.cpp:34</div></div>
<div class="ttc" id="aclass_game_scene_html_a2ed65c70bb08a871fb40b321bfa59457"><div class="ttname"><a href="#a2ed65c70bb08a871fb40b321bfa59457">GameScene::SpawnEntities</a></div><div class="ttdeci">void SpawnEntities()</div><div class="ttdoc">エンティティをスポーンする</div><div class="ttdef"><b>Definition</b> GameScene.cpp:75</div></div>
<div class="ttc" id="aclass_game_scene_html_a65a5770ebd2e996edcdc27cac7a69b62"><div class="ttname"><a href="#a65a5770ebd2e996edcdc27cac7a69b62">GameScene::kTitleEndingCameraOffsetYRatio</a></div><div class="ttdeci">static constexpr double kTitleEndingCameraOffsetYRatio</div><div class="ttdoc">タイトル・エンディング画面用のカメラオフセット比率</div><div class="ttdef"><b>Definition</b> GameScene.h:115</div></div>
<div class="ttc" id="aclass_game_scene_html_a6fbc09fbe0d70c9dd0eb4e54f868b0ed"><div class="ttname"><a href="#a6fbc09fbe0d70c9dd0eb4e54f868b0ed">GameScene::stage_</a></div><div class="ttdeci">Stage stage_</div><div class="ttdoc">ステージ</div><div class="ttdef"><b>Definition</b> GameScene.h:67</div></div>
<div class="ttc" id="aclass_game_scene_html_a946044ac0695cd89013dd6c22335f394"><div class="ttname"><a href="#a946044ac0695cd89013dd6c22335f394">GameScene::player_</a></div><div class="ttdeci">Player player_</div><div class="ttdoc">プレイヤー</div><div class="ttdef"><b>Definition</b> GameScene.h:73</div></div>
<div class="ttc" id="aclass_game_scene_html_ae02f3fc820bd84d4ecaadaf2737e3e3e"><div class="ttname"><a href="#ae02f3fc820bd84d4ecaadaf2737e3e3e">GameScene::camera_manager_</a></div><div class="ttdeci">CameraSystem camera_manager_</div><div class="ttdoc">カメラシステム</div><div class="ttdef"><b>Definition</b> GameScene.h:70</div></div>
</div><!-- fragment --><div class="dynheader">
呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="class_game_scene_aa0fa2a98f139524a96ffb9d25252b145_cgraph.svg" width="1188" height="222"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a921b4236d2a999c3b5edd8fe1d9086e1" name="a921b4236d2a999c3b5edd8fe1d9086e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a921b4236d2a999c3b5edd8fe1d9086e1">&#9670;&#160;</a></span>~GameScene()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">GameScene::~GameScene </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel override">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>デストラクタ </p>
<div class="fragment"><div class="line"><span class="lineno">   29</span>{</div>
<div class="line"><span class="lineno">   30</span>    <a class="code hl_variable" href="#aa6b380e426f6968c9fd2719b7305b350">bgm_controller_</a>.StopAll();</div>
<div class="line"><span class="lineno">   31</span>    <a class="code hl_function" href="class_asset_system.html#ac182714115a88042762b2c178a6865ca">AssetSystem::GetInstance</a>().<a class="code hl_function" href="class_asset_system.html#ab7a0d836fbd30a0f29e661f9832a15b4">UnregisterAssets</a>();</div>
<div class="line"><span class="lineno">   32</span>}</div>
<div class="ttc" id="aclass_asset_system_html_ab7a0d836fbd30a0f29e661f9832a15b4"><div class="ttname"><a href="class_asset_system.html#ab7a0d836fbd30a0f29e661f9832a15b4">AssetSystem::UnregisterAssets</a></div><div class="ttdeci">void UnregisterAssets()</div><div class="ttdoc">現在のシーンのアセット登録をすべて解除する</div><div class="ttdef"><b>Definition</b> AssetSystem.cpp:100</div></div>
<div class="ttc" id="aclass_game_scene_html_aa6b380e426f6968c9fd2719b7305b350"><div class="ttname"><a href="#aa6b380e426f6968c9fd2719b7305b350">GameScene::bgm_controller_</a></div><div class="ttdeci">SoundController bgm_controller_</div><div class="ttdoc">BGM制御</div><div class="ttdef"><b>Definition</b> GameScene.h:88</div></div>
</div><!-- fragment --><div class="dynheader">
呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="class_game_scene_a921b4236d2a999c3b5edd8fe1d9086e1_cgraph.svg" width="943" height="120"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">関数詳解</h2>
<a id="a9412458ba13451e343dd83b48c7eef13" name="a9412458ba13451e343dd83b48c7eef13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9412458ba13451e343dd83b48c7eef13">&#9670;&#160;</a></span>draw()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GameScene::draw </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel override">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>シーンを描画する </p>
<div class="fragment"><div class="line"><span class="lineno">  339</span>{</div>
<div class="line"><span class="lineno">  340</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> ColorF kSurfaceColor = <a class="code hl_variable" href="_config_8h.html#ab121746c70d1bcde449ab4bd2e676855">kGameBackgroundColor</a>;</div>
<div class="line"><span class="lineno">  341</span> </div>
<div class="line"><span class="lineno">  342</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> total_travel = <a class="code hl_variable" href="#a15264bb76160d136a34c374410988428">map_total_height_</a> - <a class="code hl_variable" href="#ad923df88ccb29eab3d1f2bc2b461e833">player_start_pos_</a>.y;</div>
<div class="line"><span class="lineno">  343</span>    <span class="keywordtype">double</span> depth_ratio = 0.0;</div>
<div class="line"><span class="lineno">  344</span>    <span class="keywordflow">if</span>(total_travel &gt; 0)</div>
<div class="line"><span class="lineno">  345</span>    {</div>
<div class="line"><span class="lineno">  346</span>        depth_ratio = (<a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.GetPos().y - <a class="code hl_variable" href="#ad923df88ccb29eab3d1f2bc2b461e833">player_start_pos_</a>.y) / total_travel;</div>
<div class="line"><span class="lineno">  347</span>    }</div>
<div class="line"><span class="lineno">  348</span>    depth_ratio = Clamp(depth_ratio, 0.0, 1.0);</div>
<div class="line"><span class="lineno">  349</span> </div>
<div class="line"><span class="lineno">  350</span>    <span class="keyword">const</span> ColorF current_bg_color = kSurfaceColor.lerp(<a class="code hl_variable" href="#a1667d8b21db6a212188a718f85ebe73e">kDeepSeaColor</a>, depth_ratio);</div>
<div class="line"><span class="lineno">  351</span>    Scene::SetBackground(current_bg_color);</div>
<div class="line"><span class="lineno">  352</span> </div>
<div class="line"><span class="lineno">  353</span>    <span class="keyword">const</span> Vec2 camera_offset = <a class="code hl_variable" href="#ae02f3fc820bd84d4ecaadaf2737e3e3e">camera_manager_</a>.GetCameraOffset();</div>
<div class="line"><span class="lineno">  354</span>    <span class="keyword">const</span> RectF view_rect = <a class="code hl_variable" href="#ae02f3fc820bd84d4ecaadaf2737e3e3e">camera_manager_</a>.GetViewRect();</div>
<div class="line"><span class="lineno">  355</span> </div>
<div class="line"><span class="lineno">  356</span>    <span class="comment">// ヘルパー関数：背景を簡単に描画（プレイヤーの近くにいる場合のみ）</span></div>
<div class="line"><span class="lineno">  357</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> render_distance = <a class="code hl_variable" href="#a6fbc09fbe0d70c9dd0eb4e54f868b0ed">stage_</a>.GetTileSize() * 12; <span class="comment">// 12マス分の距離</span></div>
<div class="line"><span class="lineno">  358</span>    <span class="keyword">const</span> Vec2 player_pos = <a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.GetPos();</div>
<div class="line"><span class="lineno">  359</span> </div>
<div class="line"><span class="lineno">  360</span>    <span class="keyword">auto</span> DrawBackground = [&amp;](<span class="keyword">const</span> String&amp; texture_name, <span class="keyword">const</span> Vec2&amp; center_pos, <span class="keywordtype">bool</span> isFlip = <span class="keyword">false</span>, <span class="keyword">const</span> Vec2&amp; velocity = Vec2{ 0.0, 0.0 }, <span class="keywordtype">bool</span> isWave = <span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  361</span>        {</div>
<div class="line"><span class="lineno">  362</span>            <span class="comment">// 各背景オブジェクトを識別するためのユニークキーを生成</span></div>
<div class="line"><span class="lineno">  363</span>            <span class="keyword">const</span> String unique_key = U<span class="stringliteral">&quot;{}_{:.1f}_{:.1f}&quot;</span>_fmt(texture_name, center_pos.x, center_pos.y);</div>
<div class="line"><span class="lineno">  364</span> </div>
<div class="line"><span class="lineno">  365</span>            <span class="comment">// プレイヤーとの距離をチェック（初期位置で）</span></div>
<div class="line"><span class="lineno">  366</span>            <span class="keyword">const</span> <span class="keywordtype">double</span> distance = player_pos.distanceFrom(center_pos);</div>
<div class="line"><span class="lineno">  367</span> </div>
<div class="line"><span class="lineno">  368</span>            <span class="comment">// プレイヤーが範囲内に入った場合、アクティブ化時刻を記録</span></div>
<div class="line"><span class="lineno">  369</span>            <span class="keywordflow">if</span>(distance &lt;= render_distance)</div>
<div class="line"><span class="lineno">  370</span>            {</div>
<div class="line"><span class="lineno">  371</span>                <span class="keywordflow">if</span>(<a class="code hl_variable" href="#a880152ec2737823c876cd92d531c67b9">background_activation_times_</a>.find(unique_key) == <a class="code hl_variable" href="#a880152ec2737823c876cd92d531c67b9">background_activation_times_</a>.end())</div>
<div class="line"><span class="lineno">  372</span>                {</div>
<div class="line"><span class="lineno">  373</span>                    <span class="comment">// まだ記録されていない場合、現在時刻を記録</span></div>
<div class="line"><span class="lineno">  374</span>                    <a class="code hl_variable" href="#a880152ec2737823c876cd92d531c67b9">background_activation_times_</a>[unique_key] = Scene::Time();</div>
<div class="line"><span class="lineno">  375</span>                }</div>
<div class="line"><span class="lineno">  376</span>            }</div>
<div class="line"><span class="lineno">  377</span> </div>
<div class="line"><span class="lineno">  378</span>            <span class="comment">// アクティブ化されていない場合は、元の位置に描画</span></div>
<div class="line"><span class="lineno">  379</span>            Vec2 animated_pos = center_pos;</div>
<div class="line"><span class="lineno">  380</span> </div>
<div class="line"><span class="lineno">  381</span>            <span class="comment">// アクティブ化されている場合のみ、移動を計算</span></div>
<div class="line"><span class="lineno">  382</span>            <span class="keywordflow">if</span>(<a class="code hl_variable" href="#a880152ec2737823c876cd92d531c67b9">background_activation_times_</a>.find(unique_key) != <a class="code hl_variable" href="#a880152ec2737823c876cd92d531c67b9">background_activation_times_</a>.end())</div>
<div class="line"><span class="lineno">  383</span>            {</div>
<div class="line"><span class="lineno">  384</span>                <span class="keyword">const</span> <span class="keywordtype">double</span> activation_time = <a class="code hl_variable" href="#a880152ec2737823c876cd92d531c67b9">background_activation_times_</a>[unique_key];</div>
<div class="line"><span class="lineno">  385</span>                <span class="keyword">const</span> <span class="keywordtype">double</span> elapsed_time = Scene::Time() - activation_time;</div>
<div class="line"><span class="lineno">  386</span> </div>
<div class="line"><span class="lineno">  387</span>                <span class="comment">// アクティブ化時刻からの経過時間に応じて速度分だけ移動</span></div>
<div class="line"><span class="lineno">  388</span>                animated_pos.x += elapsed_time * velocity.x;</div>
<div class="line"><span class="lineno">  389</span>                animated_pos.y += elapsed_time * velocity.y;</div>
<div class="line"><span class="lineno">  390</span> </div>
<div class="line"><span class="lineno">  391</span>                <span class="comment">// 波の揺れを追加</span></div>
<div class="line"><span class="lineno">  392</span>                <span class="keywordflow">if</span>(isWave)</div>
<div class="line"><span class="lineno">  393</span>                {</div>
<div class="line"><span class="lineno">  394</span>                    <span class="keyword">const</span> <span class="keywordtype">double</span> wave_amplitude = 1.0; <span class="comment">// 揺れの振幅（ピクセル）</span></div>
<div class="line"><span class="lineno">  395</span>                    <span class="keyword">const</span> <span class="keywordtype">double</span> wave_frequency = 1.0; <span class="comment">// 揺れの速さ</span></div>
<div class="line"><span class="lineno">  396</span>                    animated_pos.y += Math::Sin(elapsed_time * wave_frequency) * wave_amplitude;</div>
<div class="line"><span class="lineno">  397</span>                }</div>
<div class="line"><span class="lineno">  398</span>            }</div>
<div class="line"><span class="lineno">  399</span> </div>
<div class="line"><span class="lineno">  400</span>            <span class="comment">// 描画範囲外の場合はスキップ</span></div>
<div class="line"><span class="lineno">  401</span>            <span class="keywordflow">if</span>(distance &gt; render_distance)</div>
<div class="line"><span class="lineno">  402</span>            {</div>
<div class="line"><span class="lineno">  403</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  404</span>            }</div>
<div class="line"><span class="lineno">  405</span> </div>
<div class="line"><span class="lineno">  406</span>            <span class="keyword">const</span> Vec2 kDrawOffset = { 64.0, 64.0 };</div>
<div class="line"><span class="lineno">  407</span>            <span class="keyword">const</span> Vec2 final_pos = s3d::Floor((animated_pos - kDrawOffset) - camera_offset);</div>
<div class="line"><span class="lineno">  408</span> </div>
<div class="line"><span class="lineno">  409</span>            <span class="comment">// 左右反転して描画</span></div>
<div class="line"><span class="lineno">  410</span>            <span class="keywordflow">if</span>(isFlip)</div>
<div class="line"><span class="lineno">  411</span>            {</div>
<div class="line"><span class="lineno">  412</span>                TextureAsset(texture_name).mirrored().draw(final_pos);</div>
<div class="line"><span class="lineno">  413</span>            }</div>
<div class="line"><span class="lineno">  414</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  415</span>            {</div>
<div class="line"><span class="lineno">  416</span>                TextureAsset(texture_name).draw(final_pos);</div>
<div class="line"><span class="lineno">  417</span>            }</div>
<div class="line"><span class="lineno">  418</span>        };</div>
<div class="line"><span class="lineno">  419</span> </div>
<div class="line"><span class="lineno">  420</span>    <span class="comment">// ここで座標と画像名を指定するだけ</span></div>
<div class="line"><span class="lineno">  421</span>    DrawBackground(U<span class="stringliteral">&quot;water_lay1&quot;</span>, Vec2{ 50, 100 }, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  422</span>    DrawBackground(U<span class="stringliteral">&quot;whale&quot;</span>, Vec2{ 300, 400 }, <span class="keyword">false</span>, Vec2{ -10, 0 });</div>
<div class="line"><span class="lineno">  423</span>    DrawBackground(U<span class="stringliteral">&quot;jerry_fish&quot;</span>, Vec2{ 200, 700 }, <span class="keyword">false</span>, Vec2{ 5, -20 });</div>
<div class="line"><span class="lineno">  424</span>    DrawBackground(U<span class="stringliteral">&quot;tuna&quot;</span>, Vec2{ 200, 950 }, <span class="keyword">true</span>, Vec2{ 40, 0 });</div>
<div class="line"><span class="lineno">  425</span>    DrawBackground(U<span class="stringliteral">&quot;fish_02&quot;</span>, Vec2{ 600, 1000 }, <span class="keyword">false</span>, Vec2{ -30, 0 }, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  426</span>    DrawBackground(U<span class="stringliteral">&quot;fish_01&quot;</span>, Vec2{ 250, 1300 }, <span class="keyword">true</span>, Vec2{ 30, 0 });</div>
<div class="line"><span class="lineno">  427</span>    DrawBackground(U<span class="stringliteral">&quot;tuna&quot;</span>, Vec2{ 700, 1500 }, <span class="keyword">false</span>, Vec2{ -40, 0 });</div>
<div class="line"><span class="lineno">  428</span>    DrawBackground(U<span class="stringliteral">&quot;fish_02&quot;</span>, Vec2{ 700, 1600 }, <span class="keyword">false</span>, Vec2{ -30, 0 }, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  429</span>    DrawBackground(U<span class="stringliteral">&quot;fish_01&quot;</span>, Vec2{ 100, 1750 }, <span class="keyword">true</span>, Vec2{ 20, 0 }, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  430</span>    DrawBackground(U<span class="stringliteral">&quot;turtle&quot;</span>, Vec2{ 200, 2150 }, <span class="keyword">true</span>, Vec2{ 15, -10 });</div>
<div class="line"><span class="lineno">  431</span>    DrawBackground(U<span class="stringliteral">&quot;fish_02&quot;</span>, Vec2{ 650, 2000 }, <span class="keyword">false</span>, Vec2{ -30, 0 }, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  432</span>    DrawBackground(U<span class="stringliteral">&quot;fish_01&quot;</span>, Vec2{ 700, 2500 }, <span class="keyword">false</span>, Vec2{ -20, 0 });</div>
<div class="line"><span class="lineno">  433</span>    DrawBackground(U<span class="stringliteral">&quot;stone-bream&quot;</span>, Vec2{ 700, 2800 }, <span class="keyword">false</span>, Vec2{ -20, 0 });</div>
<div class="line"><span class="lineno">  434</span>    DrawBackground(U<span class="stringliteral">&quot;fish_02&quot;</span>, Vec2{ 100, 2900 }, <span class="keyword">true</span>, Vec2{ 20, 0 }, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  435</span>    DrawBackground(U<span class="stringliteral">&quot;stone-bream&quot;</span>, Vec2{ 600, 3300 }, <span class="keyword">false</span>, Vec2{ -20, 0 });</div>
<div class="line"><span class="lineno">  436</span>    DrawBackground(U<span class="stringliteral">&quot;fish_02&quot;</span>, Vec2{ 600, 3600 }, <span class="keyword">false</span>, Vec2{ -20, 0 }, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  437</span>    DrawBackground(U<span class="stringliteral">&quot;sunfish&quot;</span>, Vec2{ 200, 3900 }, <span class="keyword">false</span>, Vec2{ 5, 0 });</div>
<div class="line"><span class="lineno">  438</span>    DrawBackground(U<span class="stringliteral">&quot;stingray&quot;</span>, Vec2{ 200, 4600 }, <span class="keyword">false</span>, Vec2{ 5, -5 });</div>
<div class="line"><span class="lineno">  439</span>    DrawBackground(U<span class="stringliteral">&quot;stone-bream&quot;</span>, Vec2{ 100, 5000 }, <span class="keyword">true</span>, Vec2{ 10, 0 });</div>
<div class="line"><span class="lineno">  440</span>    DrawBackground(U<span class="stringliteral">&quot;deepsea-fish01&quot;</span>, Vec2{ 200 , 5400 }, <span class="keyword">true</span>, Vec2{ 5, 0 });</div>
<div class="line"><span class="lineno">  441</span>    DrawBackground(U<span class="stringliteral">&quot;deepsea-fish03&quot;</span>, Vec2{ 500, 5700 }, <span class="keyword">true</span>, Vec2{ -5, 0 });</div>
<div class="line"><span class="lineno">  442</span>    DrawBackground(U<span class="stringliteral">&quot;chair&quot;</span>, Vec2{ 200, 5900 }, <span class="keyword">false</span>, Vec2{ 0, -10 });</div>
<div class="line"><span class="lineno">  443</span>    DrawBackground(U<span class="stringliteral">&quot;deepsea-fish02&quot;</span>, Vec2{ 100, 6475 });</div>
<div class="line"><span class="lineno">  444</span>    DrawBackground(U<span class="stringliteral">&quot;oarfish&quot;</span>, Vec2{ 600, 6500 }, <span class="keyword">false</span>, Vec2{ -5, -5 });</div>
<div class="line"><span class="lineno">  445</span>    DrawBackground(U<span class="stringliteral">&quot;sofa&quot;</span>, Vec2{ 500, 6700 }, <span class="keyword">false</span>, Vec2{ 0, -10 });</div>
<div class="line"><span class="lineno">  446</span>    DrawBackground(U<span class="stringliteral">&quot;TV1&quot;</span>, Vec2{ 200, 7000 }, <span class="keyword">false</span>, Vec2{ 0, -10 });</div>
<div class="line"><span class="lineno">  447</span>    DrawBackground(U<span class="stringliteral">&quot;guide_text1&quot;</span>, Vec2{ 220, 990 });</div>
<div class="line"><span class="lineno">  448</span>    DrawBackground(U<span class="stringliteral">&quot;guide_text2&quot;</span>, Vec2{ 500, 990 });</div>
<div class="line"><span class="lineno">  449</span>    DrawBackground(U<span class="stringliteral">&quot;guide_text3&quot;</span>, Vec2{ 230, 1400 });</div>
<div class="line"><span class="lineno">  450</span>    DrawBackground(U<span class="stringliteral">&quot;guide_text4&quot;</span>, Vec2{ 250, 2370 });</div>
<div class="line"><span class="lineno">  451</span> </div>
<div class="line"><span class="lineno">  452</span>    <span class="comment">// プレイヤー開始位置にtitleを描画</span></div>
<div class="line"><span class="lineno">  453</span>    <span class="keywordflow">if</span>(TextureAsset::IsRegistered(U<span class="stringliteral">&quot;title&quot;</span>))</div>
<div class="line"><span class="lineno">  454</span>    {</div>
<div class="line"><span class="lineno">  455</span>        <span class="keyword">const</span> Vec2 title_world_pos = <a class="code hl_variable" href="#ad923df88ccb29eab3d1f2bc2b461e833">player_start_pos_</a>;</div>
<div class="line"><span class="lineno">  456</span>        Vec2 title_screen_pos = title_world_pos - camera_offset;</div>
<div class="line"><span class="lineno">  457</span>        title_screen_pos += Vec2{ -330.0, -400.0 }; <span class="comment">// 少し上にオフセット</span></div>
<div class="line"><span class="lineno">  458</span>        TextureAsset(U<span class="stringliteral">&quot;title&quot;</span>).draw(title_screen_pos);</div>
<div class="line"><span class="lineno">  459</span>    }</div>
<div class="line"><span class="lineno">  460</span> </div>
<div class="line"><span class="lineno">  461</span>    <span class="comment">// エンディング座標にoctopusを描画（背景の直後、他のオブジェクトより前）</span></div>
<div class="line"><span class="lineno">  462</span>    {</div>
<div class="line"><span class="lineno">  463</span>        <span class="comment">// エンディング開始から8.4秒後に笑顔へ切り替え</span></div>
<div class="line"><span class="lineno">  464</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span> showSmile = (<a class="code hl_variable" href="#aa4789bb9a02b48fc4facf16962ca4a75">current_state_</a> == <a class="code hl_enumvalue" href="_game_scene_8h.html#a7899b65f1ea0f655e4bbf8d2a5714285a753c34bcdd8eac2abb9042f7a93c2e75">GameState::Ending</a>)</div>
<div class="line"><span class="lineno">  465</span>            &amp;&amp; (<a class="code hl_variable" href="#a72703a1b0603a5d7e1b24629995ad14d">ending_start_time_</a> &gt;= 0.0)</div>
<div class="line"><span class="lineno">  466</span>            &amp;&amp; ((Scene::Time() - <a class="code hl_variable" href="#a72703a1b0603a5d7e1b24629995ad14d">ending_start_time_</a>) &gt;= <a class="code hl_variable" href="#aae92d7d7647fb42ea773a6820baffb1d">kOctopusSmileDelay</a>);</div>
<div class="line"><span class="lineno">  467</span> </div>
<div class="line"><span class="lineno">  468</span>        <span class="keyword">const</span> String texName = showSmile ? U<span class="stringliteral">&quot;octopus_smile&quot;</span> : U<span class="stringliteral">&quot;octopus&quot;</span>;</div>
<div class="line"><span class="lineno">  469</span> </div>
<div class="line"><span class="lineno">  470</span>        <span class="keywordflow">if</span>(TextureAsset::IsRegistered(texName))</div>
<div class="line"><span class="lineno">  471</span>        {</div>
<div class="line"><span class="lineno">  472</span>            <span class="keyword">const</span> Vec2 octopus_world_pos = Vec2{ <a class="code hl_variable" href="#a6fbc09fbe0d70c9dd0eb4e54f868b0ed">stage_</a>.GetWidth() * <a class="code hl_variable" href="#a6fbc09fbe0d70c9dd0eb4e54f868b0ed">stage_</a>.GetTileSize() / 2.0,7300.0 };</div>
<div class="line"><span class="lineno">  473</span>            <span class="keyword">const</span> Vec2 octopus_screen_pos = octopus_world_pos - camera_offset;</div>
<div class="line"><span class="lineno">  474</span>            TextureAsset(texName).drawAt(octopus_screen_pos);</div>
<div class="line"><span class="lineno">  475</span>        }</div>
<div class="line"><span class="lineno">  476</span> </div>
<div class="line"><span class="lineno">  477</span>        <span class="comment">// 笑顔になった後に画面を暗くしオーバレイ画像を描画</span></div>
<div class="line"><span class="lineno">  478</span>        <span class="keywordflow">if</span>(showSmile)</div>
<div class="line"><span class="lineno">  479</span>        {</div>
<div class="line"><span class="lineno">  480</span>            <span class="comment">// showSmile になってからの経過時間を計算</span></div>
<div class="line"><span class="lineno">  481</span>            <span class="keyword">const</span> <span class="keywordtype">double</span> smile_elapsed_time = Scene::Time() - <a class="code hl_variable" href="#a72703a1b0603a5d7e1b24629995ad14d">ending_start_time_</a> - <a class="code hl_variable" href="#aae92d7d7647fb42ea773a6820baffb1d">kOctopusSmileDelay</a>;</div>
<div class="line"><span class="lineno">  482</span> </div>
<div class="line"><span class="lineno">  483</span>            <span class="comment">// 0.8 秒以上経過してから画面を薄暗くする</span></div>
<div class="line"><span class="lineno">  484</span>            <span class="keywordflow">if</span>(smile_elapsed_time &gt;= 0.8)</div>
<div class="line"><span class="lineno">  485</span>            {</div>
<div class="line"><span class="lineno">  486</span>                <span class="comment">//画面全体を薄暗く</span></div>
<div class="line"><span class="lineno">  487</span>                Rect{ 0, 0, Scene::Width(), Scene::Height() }.draw(ColorF{ 0, 0, 0, <a class="code hl_variable" href="#acba19c430989f22697747e855c60cb1a">kEndingDarkenAlpha</a> });</div>
<div class="line"><span class="lineno">  488</span> </div>
<div class="line"><span class="lineno">  489</span>                <span class="comment">// オーバレイ画像が存在すれば中央より少し上に描画</span></div>
<div class="line"><span class="lineno">  490</span>                <span class="keywordflow">if</span>(TextureAsset::IsRegistered(<a class="code hl_variable" href="#a64b8a743a881765b83832940b6a1f18c">kEndingOverlayTexture</a>))</div>
<div class="line"><span class="lineno">  491</span>                {</div>
<div class="line"><span class="lineno">  492</span>                    <span class="keyword">constexpr</span> <span class="keywordtype">int</span> overlayYOffset = -190; <span class="comment">// 少し上に</span></div>
<div class="line"><span class="lineno">  493</span>                    TextureAsset(<a class="code hl_variable" href="#a64b8a743a881765b83832940b6a1f18c">kEndingOverlayTexture</a>).drawAt(Scene::Center().movedBy(0, overlayYOffset));</div>
<div class="line"><span class="lineno">  494</span>                }</div>
<div class="line"><span class="lineno">  495</span>            }</div>
<div class="line"><span class="lineno">  496</span>        }</div>
<div class="line"><span class="lineno">  497</span>    }</div>
<div class="line"><span class="lineno">  498</span> </div>
<div class="line"><span class="lineno">  499</span>    <a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.Draw(camera_offset);</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>    <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; enemy : <a class="code hl_variable" href="#afce5ddb19d7e812786caad6456fbf97a">enemies_</a>)</div>
<div class="line"><span class="lineno">  502</span>    {</div>
<div class="line"><span class="lineno">  503</span>        enemy.Draw(camera_offset);</div>
<div class="line"><span class="lineno">  504</span>    }</div>
<div class="line"><span class="lineno">  505</span> </div>
<div class="line"><span class="lineno">  506</span>    <a class="code hl_variable" href="#a6fbc09fbe0d70c9dd0eb4e54f868b0ed">stage_</a>.Draw(camera_offset, view_rect);</div>
<div class="line"><span class="lineno">  507</span> </div>
<div class="line"><span class="lineno">  508</span>    <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; spot : <a class="code hl_variable" href="#a09e7b014bdd0405bb6b240282b490d1e">oxygen_spots_</a>)</div>
<div class="line"><span class="lineno">  509</span>    {</div>
<div class="line"><span class="lineno">  510</span>        spot.Draw(camera_offset);</div>
<div class="line"><span class="lineno">  511</span>    }</div>
<div class="line"><span class="lineno">  512</span> </div>
<div class="line"><span class="lineno">  513</span>    <span class="comment">// UI 全体描画</span></div>
<div class="line"><span class="lineno">  514</span>    <a class="code hl_variable" href="#ac86ef266e524e23cde48487fa5e68cbd">ui_manager_</a>.Draw();</div>
<div class="line"><span class="lineno">  515</span> </div>
<div class="line"><span class="lineno">  516</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="#aa4789bb9a02b48fc4facf16962ca4a75">current_state_</a> == <a class="code hl_enumvalue" href="_game_scene_8h.html#a7899b65f1ea0f655e4bbf8d2a5714285ab78a3223503896721cca1303f776159b">GameState::Title</a>)</div>
<div class="line"><span class="lineno">  517</span>    {</div>
<div class="line"><span class="lineno">  518</span>        DrawBackground(U<span class="stringliteral">&quot;title_text&quot;</span>, Vec2{ <a class="code hl_variable" href="#a6fbc09fbe0d70c9dd0eb4e54f868b0ed">stage_</a>.GetWidth() * <a class="code hl_variable" href="#a6fbc09fbe0d70c9dd0eb4e54f868b0ed">stage_</a>.GetTileSize() / 2.0 - 100, 600 });</div>
<div class="line"><span class="lineno">  519</span>    }</div>
<div class="line"><span class="lineno">  520</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code hl_variable" href="#aa4789bb9a02b48fc4facf16962ca4a75">current_state_</a> == <a class="code hl_enumvalue" href="_game_scene_8h.html#a7899b65f1ea0f655e4bbf8d2a5714285a753c34bcdd8eac2abb9042f7a93c2e75">GameState::Ending</a>)</div>
<div class="line"><span class="lineno">  521</span>    {</div>
<div class="line"><span class="lineno">  522</span>    }</div>
<div class="line"><span class="lineno">  523</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code hl_variable" href="#aa4789bb9a02b48fc4facf16962ca4a75">current_state_</a> == <a class="code hl_enumvalue" href="_game_scene_8h.html#a7899b65f1ea0f655e4bbf8d2a5714285a8f347bc7cebca9fa6d97e70c6bc29eb3">GameState::GameOver</a>)</div>
<div class="line"><span class="lineno">  524</span>    {</div>
<div class="line"><span class="lineno">  525</span>    }</div>
<div class="line"><span class="lineno">  526</span>}</div>
<div class="ttc" id="a_config_8h_html_ab121746c70d1bcde449ab4bd2e676855"><div class="ttname"><a href="_config_8h.html#ab121746c70d1bcde449ab4bd2e676855">kGameBackgroundColor</a></div><div class="ttdeci">constexpr ColorF kGameBackgroundColor</div><div class="ttdoc">ゲームシーンの背景色</div><div class="ttdef"><b>Definition</b> Config.h:15</div></div>
<div class="ttc" id="a_game_scene_8h_html_a7899b65f1ea0f655e4bbf8d2a5714285a753c34bcdd8eac2abb9042f7a93c2e75"><div class="ttname"><a href="_game_scene_8h.html#a7899b65f1ea0f655e4bbf8d2a5714285a753c34bcdd8eac2abb9042f7a93c2e75">GameState::Ending</a></div><div class="ttdeci">@ Ending</div><div class="ttdoc">エンディング</div><div class="ttdef"><b>Definition</b> GameScene.h:23</div></div>
<div class="ttc" id="a_game_scene_8h_html_a7899b65f1ea0f655e4bbf8d2a5714285a8f347bc7cebca9fa6d97e70c6bc29eb3"><div class="ttname"><a href="_game_scene_8h.html#a7899b65f1ea0f655e4bbf8d2a5714285a8f347bc7cebca9fa6d97e70c6bc29eb3">GameState::GameOver</a></div><div class="ttdeci">@ GameOver</div><div class="ttdoc">ゲームオーバー</div><div class="ttdef"><b>Definition</b> GameScene.h:24</div></div>
<div class="ttc" id="a_game_scene_8h_html_a7899b65f1ea0f655e4bbf8d2a5714285ab78a3223503896721cca1303f776159b"><div class="ttname"><a href="_game_scene_8h.html#a7899b65f1ea0f655e4bbf8d2a5714285ab78a3223503896721cca1303f776159b">GameState::Title</a></div><div class="ttdeci">@ Title</div><div class="ttdoc">タイトル画面</div><div class="ttdef"><b>Definition</b> GameScene.h:21</div></div>
<div class="ttc" id="aclass_game_scene_html_a09e7b014bdd0405bb6b240282b490d1e"><div class="ttname"><a href="#a09e7b014bdd0405bb6b240282b490d1e">GameScene::oxygen_spots_</a></div><div class="ttdeci">s3d::Array&lt; OxygenSpot &gt; oxygen_spots_</div><div class="ttdoc">酸素スポットのリスト</div><div class="ttdef"><b>Definition</b> GameScene.h:82</div></div>
<div class="ttc" id="aclass_game_scene_html_a1667d8b21db6a212188a718f85ebe73e"><div class="ttname"><a href="#a1667d8b21db6a212188a718f85ebe73e">GameScene::kDeepSeaColor</a></div><div class="ttdeci">static constexpr ColorF kDeepSeaColor</div><div class="ttdoc">深海の背景色</div><div class="ttdef"><b>Definition</b> GameScene.h:112</div></div>
<div class="ttc" id="aclass_game_scene_html_a64b8a743a881765b83832940b6a1f18c"><div class="ttname"><a href="#a64b8a743a881765b83832940b6a1f18c">GameScene::kEndingOverlayTexture</a></div><div class="ttdeci">static constexpr StringView kEndingOverlayTexture</div><div class="ttdoc">エンディング画像のアセット名</div><div class="ttdef"><b>Definition</b> GameScene.h:133</div></div>
<div class="ttc" id="aclass_game_scene_html_a72703a1b0603a5d7e1b24629995ad14d"><div class="ttname"><a href="#a72703a1b0603a5d7e1b24629995ad14d">GameScene::ending_start_time_</a></div><div class="ttdeci">double ending_start_time_</div><div class="ttdoc">エンディング開始からの経過時間</div><div class="ttdef"><b>Definition</b> GameScene.h:124</div></div>
<div class="ttc" id="aclass_game_scene_html_a880152ec2737823c876cd92d531c67b9"><div class="ttname"><a href="#a880152ec2737823c876cd92d531c67b9">GameScene::background_activation_times_</a></div><div class="ttdeci">std::unordered_map&lt; String, double &gt; background_activation_times_</div><div class="ttdoc">背景オブジェクトのアクティブ化時刻</div><div class="ttdef"><b>Definition</b> GameScene.h:109</div></div>
<div class="ttc" id="aclass_game_scene_html_aa4789bb9a02b48fc4facf16962ca4a75"><div class="ttname"><a href="#aa4789bb9a02b48fc4facf16962ca4a75">GameScene::current_state_</a></div><div class="ttdeci">GameState current_state_</div><div class="ttdoc">現在のゲーム状態</div><div class="ttdef"><b>Definition</b> GameScene.h:76</div></div>
<div class="ttc" id="aclass_game_scene_html_aae92d7d7647fb42ea773a6820baffb1d"><div class="ttname"><a href="#aae92d7d7647fb42ea773a6820baffb1d">GameScene::kOctopusSmileDelay</a></div><div class="ttdeci">static constexpr double kOctopusSmileDelay</div><div class="ttdoc">エンディング開始から笑顔に切り替わるまでの時間(秒)</div><div class="ttdef"><b>Definition</b> GameScene.h:127</div></div>
<div class="ttc" id="aclass_game_scene_html_ac86ef266e524e23cde48487fa5e68cbd"><div class="ttname"><a href="#ac86ef266e524e23cde48487fa5e68cbd">GameScene::ui_manager_</a></div><div class="ttdeci">UISystem ui_manager_</div><div class="ttdoc">UIシステム</div><div class="ttdef"><b>Definition</b> GameScene.h:136</div></div>
<div class="ttc" id="aclass_game_scene_html_acba19c430989f22697747e855c60cb1a"><div class="ttname"><a href="#acba19c430989f22697747e855c60cb1a">GameScene::kEndingDarkenAlpha</a></div><div class="ttdeci">static constexpr double kEndingDarkenAlpha</div><div class="ttdoc">笑顔後の画面暗転アルファ値</div><div class="ttdef"><b>Definition</b> GameScene.h:130</div></div>
<div class="ttc" id="aclass_game_scene_html_ad923df88ccb29eab3d1f2bc2b461e833"><div class="ttname"><a href="#ad923df88ccb29eab3d1f2bc2b461e833">GameScene::player_start_pos_</a></div><div class="ttdeci">Vec2 player_start_pos_</div><div class="ttdoc">プレイヤーの開始位置</div><div class="ttdef"><b>Definition</b> GameScene.h:103</div></div>
<div class="ttc" id="aclass_game_scene_html_afce5ddb19d7e812786caad6456fbf97a"><div class="ttname"><a href="#afce5ddb19d7e812786caad6456fbf97a">GameScene::enemies_</a></div><div class="ttdeci">s3d::Array&lt; Enemy &gt; enemies_</div><div class="ttdoc">敵のリスト</div><div class="ttdef"><b>Definition</b> GameScene.h:79</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a023567377dcb2a8caadf8f6cab2cb4a4" name="a023567377dcb2a8caadf8f6cab2cb4a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a023567377dcb2a8caadf8f6cab2cb4a4">&#9670;&#160;</a></span>FindNearestRespawnSpot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Vec2 GameScene::FindNearestRespawnSpot </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>最も近いリスポーン地点を探索する </p>
<dl class="section return"><dt>戻り値</dt><dd>リスポーン地点の座標 </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  310</span>{</div>
<div class="line"><span class="lineno">  311</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> dead_y = <a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.GetPos().y;</div>
<div class="line"><span class="lineno">  312</span>    Vec2 best_spot_pos = Vec2::Zero();</div>
<div class="line"><span class="lineno">  313</span>    <span class="keywordtype">double</span> min_distance = std::numeric_limits&lt;double&gt;::max();</div>
<div class="line"><span class="lineno">  314</span> </div>
<div class="line"><span class="lineno">  315</span>    <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; spot : <a class="code hl_variable" href="#a09e7b014bdd0405bb6b240282b490d1e">oxygen_spots_</a>)</div>
<div class="line"><span class="lineno">  316</span>    {</div>
<div class="line"><span class="lineno">  317</span>        <span class="keyword">const</span> Vec2 spot_pos = spot.GetPos();</div>
<div class="line"><span class="lineno">  318</span> </div>
<div class="line"><span class="lineno">  319</span>        <span class="keywordflow">if</span>(spot_pos.y &lt; dead_y)</div>
<div class="line"><span class="lineno">  320</span>        {</div>
<div class="line"><span class="lineno">  321</span>            <span class="keyword">const</span> <span class="keywordtype">double</span> distance_y = dead_y - spot_pos.y;</div>
<div class="line"><span class="lineno">  322</span>            <span class="keywordflow">if</span>(distance_y &lt; min_distance)</div>
<div class="line"><span class="lineno">  323</span>            {</div>
<div class="line"><span class="lineno">  324</span>                min_distance = distance_y;</div>
<div class="line"><span class="lineno">  325</span>                best_spot_pos = spot_pos;</div>
<div class="line"><span class="lineno">  326</span>            }</div>
<div class="line"><span class="lineno">  327</span>        }</div>
<div class="line"><span class="lineno">  328</span>    }</div>
<div class="line"><span class="lineno">  329</span> </div>
<div class="line"><span class="lineno">  330</span>    <span class="keywordflow">if</span>(best_spot_pos == Vec2::Zero())</div>
<div class="line"><span class="lineno">  331</span>    {</div>
<div class="line"><span class="lineno">  332</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="#ad923df88ccb29eab3d1f2bc2b461e833">player_start_pos_</a>;</div>
<div class="line"><span class="lineno">  333</span>    }</div>
<div class="line"><span class="lineno">  334</span> </div>
<div class="line"><span class="lineno">  335</span>    <span class="keywordflow">return</span> best_spot_pos;</div>
<div class="line"><span class="lineno">  336</span>}</div>
</div><!-- fragment --><div class="dynheader">
被呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="class_game_scene_a023567377dcb2a8caadf8f6cab2cb4a4_icgraph.svg" width="454" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad736ded9ab220b8f39601204775908ff" name="ad736ded9ab220b8f39601204775908ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad736ded9ab220b8f39601204775908ff">&#9670;&#160;</a></span>OnPlayerDied()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GameScene::OnPlayerDied </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>プレイヤーが死亡した時の処理 </p>
<div class="fragment"><div class="line"><span class="lineno">  305</span>{</div>
<div class="line"><span class="lineno">  306</span>    <span class="comment">//Print &lt;&lt; U&quot;GAME SCENE: OXYGEN ZERO!&quot;;</span></div>
<div class="line"><span class="lineno">  307</span>}</div>
</div><!-- fragment --><div class="dynheader">
被呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="class_game_scene_ad736ded9ab220b8f39601204775908ff_icgraph.svg" width="382" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aa563b355724487c1568bd4ab41c4d95d" name="aa563b355724487c1568bd4ab41c4d95d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa563b355724487c1568bd4ab41c4d95d">&#9670;&#160;</a></span>ProcessPendingBGM()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GameScene::ProcessPendingBGM </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>保留中のBGM再生を処理する </p>
<div class="fragment"><div class="line"><span class="lineno">   59</span>{</div>
<div class="line"><span class="lineno">   60</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="#a17bd10c9c9a893337f882ac2cc29fa2c">pending_bgm_asset_</a>.isEmpty())</div>
<div class="line"><span class="lineno">   61</span>    {</div>
<div class="line"><span class="lineno">   62</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   63</span>    }</div>
<div class="line"><span class="lineno">   64</span> </div>
<div class="line"><span class="lineno">   65</span>    <span class="comment">// 登録され準備完了したら再生する</span></div>
<div class="line"><span class="lineno">   66</span>    <span class="keywordflow">if</span>(AudioAsset::IsRegistered(<a class="code hl_variable" href="#a17bd10c9c9a893337f882ac2cc29fa2c">pending_bgm_asset_</a>) &amp;&amp; AudioAsset::IsReady(<a class="code hl_variable" href="#a17bd10c9c9a893337f882ac2cc29fa2c">pending_bgm_asset_</a>))</div>
<div class="line"><span class="lineno">   67</span>    {</div>
<div class="line"><span class="lineno">   68</span>        <a class="code hl_variable" href="#aa6b380e426f6968c9fd2719b7305b350">bgm_controller_</a>.Play(<a class="code hl_variable" href="#a17bd10c9c9a893337f882ac2cc29fa2c">pending_bgm_asset_</a>, <a class="code hl_variable" href="#a8d18c87d67bcb9a95a199f778abf1fdd">pending_bgm_loop_</a>);</div>
<div class="line"><span class="lineno">   69</span>        <a class="code hl_variable" href="#a8939149550ec6173266a918dbc3c675d">current_playing_bgm_asset_</a> = <a class="code hl_variable" href="#a17bd10c9c9a893337f882ac2cc29fa2c">pending_bgm_asset_</a>;</div>
<div class="line"><span class="lineno">   70</span>        <a class="code hl_variable" href="#a17bd10c9c9a893337f882ac2cc29fa2c">pending_bgm_asset_</a>.clear();</div>
<div class="line"><span class="lineno">   71</span>        <a class="code hl_variable" href="#a8d18c87d67bcb9a95a199f778abf1fdd">pending_bgm_loop_</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   72</span>    }</div>
<div class="line"><span class="lineno">   73</span>}</div>
<div class="ttc" id="aclass_game_scene_html_a17bd10c9c9a893337f882ac2cc29fa2c"><div class="ttname"><a href="#a17bd10c9c9a893337f882ac2cc29fa2c">GameScene::pending_bgm_asset_</a></div><div class="ttdeci">String pending_bgm_asset_</div><div class="ttdoc">保留中のBGMアセット名</div><div class="ttdef"><b>Definition</b> GameScene.h:94</div></div>
<div class="ttc" id="aclass_game_scene_html_a8939149550ec6173266a918dbc3c675d"><div class="ttname"><a href="#a8939149550ec6173266a918dbc3c675d">GameScene::current_playing_bgm_asset_</a></div><div class="ttdeci">String current_playing_bgm_asset_</div><div class="ttdoc">現在再生中のBGMアセット名</div><div class="ttdef"><b>Definition</b> GameScene.h:100</div></div>
<div class="ttc" id="aclass_game_scene_html_a8d18c87d67bcb9a95a199f778abf1fdd"><div class="ttname"><a href="#a8d18c87d67bcb9a95a199f778abf1fdd">GameScene::pending_bgm_loop_</a></div><div class="ttdeci">bool pending_bgm_loop_</div><div class="ttdoc">保留中のBGMループフラグ</div><div class="ttdef"><b>Definition</b> GameScene.h:97</div></div>
</div><!-- fragment --><div class="dynheader">
被呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="class_game_scene_aa563b355724487c1568bd4ab41c4d95d_icgraph.svg" width="647" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a2ed65c70bb08a871fb40b321bfa59457" name="a2ed65c70bb08a871fb40b321bfa59457"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ed65c70bb08a871fb40b321bfa59457">&#9670;&#160;</a></span>SpawnEntities()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GameScene::SpawnEntities </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>エンティティをスポーンする </p>
<div class="fragment"><div class="line"><span class="lineno">   76</span>{</div>
<div class="line"><span class="lineno">   77</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; spawn_points = <a class="code hl_variable" href="#a6fbc09fbe0d70c9dd0eb4e54f868b0ed">stage_</a>.GetSpawnPoints();</div>
<div class="line"><span class="lineno">   78</span> </div>
<div class="line"><span class="lineno">   79</span>    <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; info : spawn_points)</div>
<div class="line"><span class="lineno">   80</span>    {</div>
<div class="line"><span class="lineno">   81</span>        <span class="keywordflow">if</span>(info.type.isEmpty())</div>
<div class="line"><span class="lineno">   82</span>        {</div>
<div class="line"><span class="lineno">   83</span>            Print &lt;&lt; U<span class="stringliteral">&quot;Warning: Tiled object_spawn に &#39;Type&#39; が設定されていないオブジェクトがあります．&quot;</span>;</div>
<div class="line"><span class="lineno">   84</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   85</span>        }</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>        <span class="keyword">const</span> Vec2 center_pos = info.pos + (info.size / 2.0);</div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>        <span class="keywordflow">if</span>(info.type == U<span class="stringliteral">&quot;Player&quot;</span>)</div>
<div class="line"><span class="lineno">   90</span>        {</div>
<div class="line"><span class="lineno">   91</span>            <a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.SetPos(center_pos);</div>
<div class="line"><span class="lineno">   92</span>            <a class="code hl_variable" href="#ad923df88ccb29eab3d1f2bc2b461e833">player_start_pos_</a> = center_pos;</div>
<div class="line"><span class="lineno">   93</span>        }</div>
<div class="line"><span class="lineno">   94</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(info.type == U<span class="stringliteral">&quot;Oxygen&quot;</span>)</div>
<div class="line"><span class="lineno">   95</span>        {</div>
<div class="line"><span class="lineno">   96</span>            <a class="code hl_variable" href="#a09e7b014bdd0405bb6b240282b490d1e">oxygen_spots_</a>.emplace_back(center_pos, info.size);</div>
<div class="line"><span class="lineno">   97</span>        }</div>
<div class="line"><span class="lineno">   98</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   99</span>        {</div>
<div class="line"><span class="lineno">  100</span>            <a class="code hl_variable" href="#afce5ddb19d7e812786caad6456fbf97a">enemies_</a>.emplace_back(info.type, center_pos);</div>
<div class="line"><span class="lineno">  101</span>        }</div>
<div class="line"><span class="lineno">  102</span>    }</div>
<div class="line"><span class="lineno">  103</span>}</div>
</div><!-- fragment --><div class="dynheader">
被呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="class_game_scene_a2ed65c70bb08a871fb40b321bfa59457_icgraph.svg" width="418" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a1717f5abe6408c41d43fc54a5e2c5314" name="a1717f5abe6408c41d43fc54a5e2c5314"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1717f5abe6408c41d43fc54a5e2c5314">&#9670;&#160;</a></span>StartOrDeferBGM()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GameScene::StartOrDeferBGM </td>
          <td>(</td>
          <td class="paramtype">const String &amp;</td>          <td class="paramname"><span class="paramname"><em>asset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>loop</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>BGM再生を開始または遅延させる </p>
<dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">asset</td><td>BGMのアセット名 </td></tr>
    <tr><td class="paramname">loop</td><td>ループ再生するか </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">   35</span>{</div>
<div class="line"><span class="lineno">   36</span>    <span class="comment">//既に現在再生中のBGMと同じなら何もしない</span></div>
<div class="line"><span class="lineno">   37</span>    <span class="keywordflow">if</span>(not <a class="code hl_variable" href="#a8939149550ec6173266a918dbc3c675d">current_playing_bgm_asset_</a>.isEmpty() &amp;&amp; <a class="code hl_variable" href="#a8939149550ec6173266a918dbc3c675d">current_playing_bgm_asset_</a> == asset)</div>
<div class="line"><span class="lineno">   38</span>    {</div>
<div class="line"><span class="lineno">   39</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   40</span>    }</div>
<div class="line"><span class="lineno">   41</span> </div>
<div class="line"><span class="lineno">   42</span>    <span class="comment">// 即時再生できるなら再生して記録する</span></div>
<div class="line"><span class="lineno">   43</span>    <span class="keywordflow">if</span>(AudioAsset::IsRegistered(asset) &amp;&amp; AudioAsset::IsReady(asset))</div>
<div class="line"><span class="lineno">   44</span>    {</div>
<div class="line"><span class="lineno">   45</span>        <a class="code hl_variable" href="#aa6b380e426f6968c9fd2719b7305b350">bgm_controller_</a>.Play(asset, loop);</div>
<div class="line"><span class="lineno">   46</span>        <a class="code hl_variable" href="#a8939149550ec6173266a918dbc3c675d">current_playing_bgm_asset_</a> = asset;</div>
<div class="line"><span class="lineno">   47</span>        <span class="comment">// clear pending</span></div>
<div class="line"><span class="lineno">   48</span>        <a class="code hl_variable" href="#a17bd10c9c9a893337f882ac2cc29fa2c">pending_bgm_asset_</a>.clear();</div>
<div class="line"><span class="lineno">   49</span>        <a class="code hl_variable" href="#a8d18c87d67bcb9a95a199f778abf1fdd">pending_bgm_loop_</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   50</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   51</span>    }</div>
<div class="line"><span class="lineno">   52</span> </div>
<div class="line"><span class="lineno">   53</span>    <span class="comment">//まだ準備できていない場合は保留して毎フレームチェックする</span></div>
<div class="line"><span class="lineno">   54</span>    <a class="code hl_variable" href="#a17bd10c9c9a893337f882ac2cc29fa2c">pending_bgm_asset_</a> = asset;</div>
<div class="line"><span class="lineno">   55</span>    <a class="code hl_variable" href="#a8d18c87d67bcb9a95a199f778abf1fdd">pending_bgm_loop_</a> = loop;</div>
<div class="line"><span class="lineno">   56</span>}</div>
</div><!-- fragment --><div class="dynheader">
被呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="class_game_scene_a1717f5abe6408c41d43fc54a5e2c5314_icgraph.svg" width="626" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a70464c5d4ccd05d39a9cb168e332c93a" name="a70464c5d4ccd05d39a9cb168e332c93a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70464c5d4ccd05d39a9cb168e332c93a">&#9670;&#160;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GameScene::update </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel override">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>シーンを更新する </p>
<div class="fragment"><div class="line"><span class="lineno">  152</span>{</div>
<div class="line"><span class="lineno">  153</span>    <span class="comment">// BGMの状態を更新</span></div>
<div class="line"><span class="lineno">  154</span>    <a class="code hl_function" href="#a90075ad52095e3d625ae3aa13fada7e8">UpdateBGM</a>();</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span><span class="preprocessor">#if 0 </span><span class="comment">// デバッグ用: 0 にすると無効化</span></div>
<div class="line"><span class="lineno">  157</span>    <span class="comment">// Eキーでエンディング付近にワープ</span></div>
<div class="line"><span class="lineno">  158</span>    <span class="keywordflow">if</span>(KeyE.down())</div>
<div class="line"><span class="lineno">  159</span>    {</div>
<div class="line"><span class="lineno">  160</span>        Vec2 current_pos = <a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.GetPos();</div>
<div class="line"><span class="lineno">  161</span>        current_pos.y = 7600.0;</div>
<div class="line"><span class="lineno">  162</span>        <a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.SetPos(current_pos);</div>
<div class="line"><span class="lineno">  163</span>        <span class="comment">//Print &lt;&lt; U&quot;DEBUG: Warped to ending zone!&quot;;</span></div>
<div class="line"><span class="lineno">  164</span>    }</div>
<div class="line"><span class="lineno">  165</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>    <span class="keywordflow">switch</span>(<a class="code hl_variable" href="#aa4789bb9a02b48fc4facf16962ca4a75">current_state_</a>)</div>
<div class="line"><span class="lineno">  168</span>    {</div>
<div class="line"><span class="lineno">  169</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="_game_scene_8h.html#a7899b65f1ea0f655e4bbf8d2a5714285ab78a3223503896721cca1303f776159b">GameState::Title</a>:</div>
<div class="line"><span class="lineno">  170</span>    {</div>
<div class="line"><span class="lineno">  171</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; spot : <a class="code hl_variable" href="#a09e7b014bdd0405bb6b240282b490d1e">oxygen_spots_</a>)</div>
<div class="line"><span class="lineno">  172</span>        {</div>
<div class="line"><span class="lineno">  173</span>            spot.Update();</div>
<div class="line"><span class="lineno">  174</span>        }</div>
<div class="line"><span class="lineno">  175</span> </div>
<div class="line"><span class="lineno">  176</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="_config_8h.html#ad475090b87f406cb3ff3562105a10251">kInputOK</a>.down() || KeyEnter.down())</div>
<div class="line"><span class="lineno">  177</span>        {</div>
<div class="line"><span class="lineno">  178</span>            <a class="code hl_variable" href="#aa4789bb9a02b48fc4facf16962ca4a75">current_state_</a> = <a class="code hl_enumvalue" href="_game_scene_8h.html#a7899b65f1ea0f655e4bbf8d2a5714285ac9dbb2b7c84159b632d71e512eba8428">GameState::Playing</a>;</div>
<div class="line"><span class="lineno">  179</span>        }</div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  181</span>        <a class="code hl_variable" href="#ae02f3fc820bd84d4ecaadaf2737e3e3e">camera_manager_</a>.SetYOffsetRatio(<a class="code hl_variable" href="#a65a5770ebd2e996edcdc27cac7a69b62">kTitleEndingCameraOffsetYRatio</a>);</div>
<div class="line"><span class="lineno">  182</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  183</span>    }</div>
<div class="line"><span class="lineno">  184</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="_game_scene_8h.html#a7899b65f1ea0f655e4bbf8d2a5714285ac9dbb2b7c84159b632d71e512eba8428">GameState::Playing</a>:</div>
<div class="line"><span class="lineno">  185</span>    {</div>
<div class="line"><span class="lineno">  186</span>        <a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.Update(<a class="code hl_variable" href="#a6fbc09fbe0d70c9dd0eb4e54f868b0ed">stage_</a>);</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.GetPos().y &gt;= <a class="code hl_variable" href="#af61de4ec45054c4ad819aa667e2d6aab">kEndingZoneY</a>)</div>
<div class="line"><span class="lineno">  189</span>        {</div>
<div class="line"><span class="lineno">  190</span>            <a class="code hl_variable" href="#aa4789bb9a02b48fc4facf16962ca4a75">current_state_</a> = <a class="code hl_enumvalue" href="_game_scene_8h.html#a7899b65f1ea0f655e4bbf8d2a5714285a753c34bcdd8eac2abb9042f7a93c2e75">GameState::Ending</a>;</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>            <span class="comment">// エンディング開始時刻を記録</span></div>
<div class="line"><span class="lineno">  193</span>            <a class="code hl_variable" href="#a72703a1b0603a5d7e1b24629995ad14d">ending_start_time_</a> = Scene::Time();</div>
<div class="line"><span class="lineno">  194</span> </div>
<div class="line"><span class="lineno">  195</span>            <span class="keyword">const</span> <span class="keywordtype">double</span> camera_center_x = <a class="code hl_variable" href="#ae02f3fc820bd84d4ecaadaf2737e3e3e">camera_manager_</a>.GetViewRect().center().x;</div>
<div class="line"><span class="lineno">  196</span>            <a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.StartEnding(camera_center_x);</div>
<div class="line"><span class="lineno">  197</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  198</span>        }</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.IsOxygenEmpty())</div>
<div class="line"><span class="lineno">  201</span>        {</div>
<div class="line"><span class="lineno">  202</span>            <a class="code hl_variable" href="#aa4789bb9a02b48fc4facf16962ca4a75">current_state_</a> = <a class="code hl_enumvalue" href="_game_scene_8h.html#a7899b65f1ea0f655e4bbf8d2a5714285a8f347bc7cebca9fa6d97e70c6bc29eb3">GameState::GameOver</a>;</div>
<div class="line"><span class="lineno">  203</span>            <a class="code hl_function" href="#ad736ded9ab220b8f39601204775908ff">OnPlayerDied</a>();</div>
<div class="line"><span class="lineno">  204</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  205</span>        }</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; spot : <a class="code hl_variable" href="#a09e7b014bdd0405bb6b240282b490d1e">oxygen_spots_</a>)</div>
<div class="line"><span class="lineno">  208</span>        {</div>
<div class="line"><span class="lineno">  209</span>            spot.Update();</div>
<div class="line"><span class="lineno">  210</span>        }</div>
<div class="line"><span class="lineno">  211</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; enemy : <a class="code hl_variable" href="#afce5ddb19d7e812786caad6456fbf97a">enemies_</a>)</div>
<div class="line"><span class="lineno">  212</span>        {</div>
<div class="line"><span class="lineno">  213</span>            enemy.Update(<a class="code hl_variable" href="#a6fbc09fbe0d70c9dd0eb4e54f868b0ed">stage_</a>, <a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>);</div>
<div class="line"><span class="lineno">  214</span>        }</div>
<div class="line"><span class="lineno">  215</span> </div>
<div class="line"><span class="lineno">  216</span>        <span class="comment">// マネージャーの登録リストを完全にリセット</span></div>
<div class="line"><span class="lineno">  217</span>        <a class="code hl_variable" href="#a2e50b365a5b44298a88b522c2b215382">collision_manager_</a>.Clear();</div>
<div class="line"><span class="lineno">  218</span> </div>
<div class="line"><span class="lineno">  219</span>        <span class="comment">// 各コライダーの衝突結果もリセット</span></div>
<div class="line"><span class="lineno">  220</span>        <a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.collider.ClearCollisionResult();</div>
<div class="line"><span class="lineno">  221</span>        <a class="code hl_variable" href="#a2e50b365a5b44298a88b522c2b215382">collision_manager_</a>.RegisterPlayer(&amp;<a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.collider);</div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span>        <span class="comment">// 敵のコライダーを登録(生存中のもののみ)</span></div>
<div class="line"><span class="lineno">  224</span>        <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code hl_variable" href="#afce5ddb19d7e812786caad6456fbf97a">enemies_</a>.size(); ++i)</div>
<div class="line"><span class="lineno">  225</span>        {</div>
<div class="line"><span class="lineno">  226</span>            <span class="keywordflow">if</span>(<a class="code hl_variable" href="#afce5ddb19d7e812786caad6456fbf97a">enemies_</a>[i].IsAlive())</div>
<div class="line"><span class="lineno">  227</span>            {</div>
<div class="line"><span class="lineno">  228</span>                <span class="keyword">auto</span>&amp; enemy_collider = <a class="code hl_variable" href="#afce5ddb19d7e812786caad6456fbf97a">enemies_</a>[i].GetCollider();</div>
<div class="line"><span class="lineno">  229</span>                enemy_collider.ClearCollisionResult();</div>
<div class="line"><span class="lineno">  230</span>                <a class="code hl_variable" href="#a2e50b365a5b44298a88b522c2b215382">collision_manager_</a>.RegisterOther(&amp;enemy_collider, <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(i + 1));</div>
<div class="line"><span class="lineno">  231</span>            }</div>
<div class="line"><span class="lineno">  232</span>        }</div>
<div class="line"><span class="lineno">  233</span> </div>
<div class="line"><span class="lineno">  234</span>        <span class="comment">// 酸素スポットのコライダーを登録</span></div>
<div class="line"><span class="lineno">  235</span>        <span class="keyword">const</span> uint32_t oxygen_id_offset = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="#afce5ddb19d7e812786caad6456fbf97a">enemies_</a>.size() + 1);</div>
<div class="line"><span class="lineno">  236</span>        <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code hl_variable" href="#a09e7b014bdd0405bb6b240282b490d1e">oxygen_spots_</a>.size(); ++i)</div>
<div class="line"><span class="lineno">  237</span>        {</div>
<div class="line"><span class="lineno">  238</span>            <span class="keyword">auto</span>&amp; spot_collider = <a class="code hl_variable" href="#a09e7b014bdd0405bb6b240282b490d1e">oxygen_spots_</a>[i].GetCollider();</div>
<div class="line"><span class="lineno">  239</span>            spot_collider.ClearCollisionResult();</div>
<div class="line"><span class="lineno">  240</span>            <a class="code hl_variable" href="#a2e50b365a5b44298a88b522c2b215382">collision_manager_</a>.RegisterOther(&amp;spot_collider, oxygen_id_offset + <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(i));</div>
<div class="line"><span class="lineno">  241</span>        }</div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span>        <span class="comment">// Player vs Other の衝突判定を実行（O(N)）</span></div>
<div class="line"><span class="lineno">  244</span>        <a class="code hl_variable" href="#a2e50b365a5b44298a88b522c2b215382">collision_manager_</a>.ResolveCollisions();</div>
<div class="line"><span class="lineno">  245</span> </div>
<div class="line"><span class="lineno">  246</span>        <a class="code hl_variable" href="#ae02f3fc820bd84d4ecaadaf2737e3e3e">camera_manager_</a>.SetYOffsetRatio(<a class="code hl_variable" href="#a5b0377e5605ea62f8779d2aa4f5e074f">kPlayingCameraOffsetYRatio</a>);</div>
<div class="line"><span class="lineno">  247</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  248</span>    }</div>
<div class="line"><span class="lineno">  249</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="_game_scene_8h.html#a7899b65f1ea0f655e4bbf8d2a5714285a753c34bcdd8eac2abb9042f7a93c2e75">GameState::Ending</a>:</div>
<div class="line"><span class="lineno">  250</span>    {</div>
<div class="line"><span class="lineno">  251</span>        <a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.Update(<a class="code hl_variable" href="#a6fbc09fbe0d70c9dd0eb4e54f868b0ed">stage_</a>);</div>
<div class="line"><span class="lineno">  252</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; spot : <a class="code hl_variable" href="#a09e7b014bdd0405bb6b240282b490d1e">oxygen_spots_</a>) { spot.Update(); }</div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span>        <a class="code hl_variable" href="#ae02f3fc820bd84d4ecaadaf2737e3e3e">camera_manager_</a>.SetYOffsetRatio(<a class="code hl_variable" href="#a65a5770ebd2e996edcdc27cac7a69b62">kTitleEndingCameraOffsetYRatio</a>);</div>
<div class="line"><span class="lineno">  255</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  256</span>    }</div>
<div class="line"><span class="lineno">  257</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="_game_scene_8h.html#a7899b65f1ea0f655e4bbf8d2a5714285a8f347bc7cebca9fa6d97e70c6bc29eb3">GameState::GameOver</a>:</div>
<div class="line"><span class="lineno">  258</span>    {</div>
<div class="line"><span class="lineno">  259</span>        <a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.Update(<a class="code hl_variable" href="#a6fbc09fbe0d70c9dd0eb4e54f868b0ed">stage_</a>);</div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="_config_8h.html#ad475090b87f406cb3ff3562105a10251">kInputOK</a>.down() || KeyEnter.down())</div>
<div class="line"><span class="lineno">  262</span>        {</div>
<div class="line"><span class="lineno">  263</span>            Vec2 respawn_pos = <a class="code hl_function" href="#a023567377dcb2a8caadf8f6cab2cb4a4">FindNearestRespawnSpot</a>();</div>
<div class="line"><span class="lineno">  264</span>            <a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.Respawn(respawn_pos);</div>
<div class="line"><span class="lineno">  265</span>            <a class="code hl_variable" href="#aa4789bb9a02b48fc4facf16962ca4a75">current_state_</a> = <a class="code hl_enumvalue" href="_game_scene_8h.html#a7899b65f1ea0f655e4bbf8d2a5714285ac9dbb2b7c84159b632d71e512eba8428">GameState::Playing</a>;</div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span>            <span class="comment">// リスポーン時にBGMを再開</span></div>
<div class="line"><span class="lineno">  268</span>            <a class="code hl_variable" href="#a51bb879d96662711ff93191ab1396efe">is_intro_finished_</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  269</span>            <a class="code hl_function" href="#a1717f5abe6408c41d43fc54a5e2c5314">StartOrDeferBGM</a>(U<span class="stringliteral">&quot;deepsea_intro&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>            <span class="comment">// エンディングタイマーをリセット</span></div>
<div class="line"><span class="lineno">  272</span>            <a class="code hl_variable" href="#a72703a1b0603a5d7e1b24629995ad14d">ending_start_time_</a> = -1.0;</div>
<div class="line"><span class="lineno">  273</span>        }</div>
<div class="line"><span class="lineno">  274</span> </div>
<div class="line"><span class="lineno">  275</span>        <a class="code hl_variable" href="#ae02f3fc820bd84d4ecaadaf2737e3e3e">camera_manager_</a>.SetYOffsetRatio(<a class="code hl_variable" href="#a5b0377e5605ea62f8779d2aa4f5e074f">kPlayingCameraOffsetYRatio</a>);</div>
<div class="line"><span class="lineno">  276</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  277</span>    }</div>
<div class="line"><span class="lineno">  278</span>    }</div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>    <span class="comment">// UI に必要な値を更新</span></div>
<div class="line"><span class="lineno">  281</span>    {</div>
<div class="line"><span class="lineno">  282</span>        s3d::Array&lt;s3d::Vec2&gt; spot_centers;</div>
<div class="line"><span class="lineno">  283</span>        spot_centers.reserve(<a class="code hl_variable" href="#a09e7b014bdd0405bb6b240282b490d1e">oxygen_spots_</a>.size());</div>
<div class="line"><span class="lineno">  284</span>        <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; spot : <a class="code hl_variable" href="#a09e7b014bdd0405bb6b240282b490d1e">oxygen_spots_</a>)</div>
<div class="line"><span class="lineno">  285</span>        {</div>
<div class="line"><span class="lineno">  286</span>            <span class="comment">// OxygenSpot は中心座標を返す想定</span></div>
<div class="line"><span class="lineno">  287</span>            spot_centers &lt;&lt; spot.GetPos();</div>
<div class="line"><span class="lineno">  288</span>        }</div>
<div class="line"><span class="lineno">  289</span> </div>
<div class="line"><span class="lineno">  290</span>        <a class="code hl_variable" href="#ac86ef266e524e23cde48487fa5e68cbd">ui_manager_</a>.Update(</div>
<div class="line"><span class="lineno">  291</span>            <a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.GetOxygen(),</div>
<div class="line"><span class="lineno">  292</span>            <a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.GetMaxOxygen(),</div>
<div class="line"><span class="lineno">  293</span>            <a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.GetPos().y,</div>
<div class="line"><span class="lineno">  294</span>            <a class="code hl_variable" href="#ad923df88ccb29eab3d1f2bc2b461e833">player_start_pos_</a>.y,</div>
<div class="line"><span class="lineno">  295</span>            <a class="code hl_variable" href="#a15264bb76160d136a34c374410988428">map_total_height_</a>,</div>
<div class="line"><span class="lineno">  296</span>            spot_centers</div>
<div class="line"><span class="lineno">  297</span>        );</div>
<div class="line"><span class="lineno">  298</span>    }</div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>    <a class="code hl_variable" href="#ae02f3fc820bd84d4ecaadaf2737e3e3e">camera_manager_</a>.SetTargetY(<a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.GetPos().y);</div>
<div class="line"><span class="lineno">  301</span>    <a class="code hl_variable" href="#ae02f3fc820bd84d4ecaadaf2737e3e3e">camera_manager_</a>.Update();</div>
<div class="line"><span class="lineno">  302</span>}</div>
<div class="ttc" id="a_config_8h_html_ad475090b87f406cb3ff3562105a10251"><div class="ttname"><a href="_config_8h.html#ad475090b87f406cb3ff3562105a10251">kInputOK</a></div><div class="ttdeci">const InputGroup kInputOK</div><div class="ttdoc">決定キー</div><div class="ttdef"><b>Definition</b> Config.h:28</div></div>
<div class="ttc" id="a_game_scene_8h_html_a7899b65f1ea0f655e4bbf8d2a5714285ac9dbb2b7c84159b632d71e512eba8428"><div class="ttname"><a href="_game_scene_8h.html#a7899b65f1ea0f655e4bbf8d2a5714285ac9dbb2b7c84159b632d71e512eba8428">GameState::Playing</a></div><div class="ttdeci">@ Playing</div><div class="ttdoc">ゲーム中</div><div class="ttdef"><b>Definition</b> GameScene.h:22</div></div>
<div class="ttc" id="aclass_game_scene_html_a023567377dcb2a8caadf8f6cab2cb4a4"><div class="ttname"><a href="#a023567377dcb2a8caadf8f6cab2cb4a4">GameScene::FindNearestRespawnSpot</a></div><div class="ttdeci">Vec2 FindNearestRespawnSpot() const</div><div class="ttdoc">最も近いリスポーン地点を探索する</div><div class="ttdef"><b>Definition</b> GameScene.cpp:309</div></div>
<div class="ttc" id="aclass_game_scene_html_a2e50b365a5b44298a88b522c2b215382"><div class="ttname"><a href="#a2e50b365a5b44298a88b522c2b215382">GameScene::collision_manager_</a></div><div class="ttdeci">CollisionSystem collision_manager_</div><div class="ttdoc">衝突判定システム</div><div class="ttdef"><b>Definition</b> GameScene.h:85</div></div>
<div class="ttc" id="aclass_game_scene_html_a51bb879d96662711ff93191ab1396efe"><div class="ttname"><a href="#a51bb879d96662711ff93191ab1396efe">GameScene::is_intro_finished_</a></div><div class="ttdeci">bool is_intro_finished_</div><div class="ttdoc">イントロが終了したか</div><div class="ttdef"><b>Definition</b> GameScene.h:91</div></div>
<div class="ttc" id="aclass_game_scene_html_a5b0377e5605ea62f8779d2aa4f5e074f"><div class="ttname"><a href="#a5b0377e5605ea62f8779d2aa4f5e074f">GameScene::kPlayingCameraOffsetYRatio</a></div><div class="ttdeci">static constexpr double kPlayingCameraOffsetYRatio</div><div class="ttdoc">ゲームプレイ用のカメラオフセット比率</div><div class="ttdef"><b>Definition</b> GameScene.h:118</div></div>
<div class="ttc" id="aclass_game_scene_html_a90075ad52095e3d625ae3aa13fada7e8"><div class="ttname"><a href="#a90075ad52095e3d625ae3aa13fada7e8">GameScene::UpdateBGM</a></div><div class="ttdeci">void UpdateBGM()</div><div class="ttdoc">BGMを更新する</div><div class="ttdef"><b>Definition</b> GameScene.cpp:105</div></div>
<div class="ttc" id="aclass_game_scene_html_ad736ded9ab220b8f39601204775908ff"><div class="ttname"><a href="#ad736ded9ab220b8f39601204775908ff">GameScene::OnPlayerDied</a></div><div class="ttdeci">void OnPlayerDied()</div><div class="ttdoc">プレイヤーが死亡した時の処理</div><div class="ttdef"><b>Definition</b> GameScene.cpp:304</div></div>
<div class="ttc" id="aclass_game_scene_html_af61de4ec45054c4ad819aa667e2d6aab"><div class="ttname"><a href="#af61de4ec45054c4ad819aa667e2d6aab">GameScene::kEndingZoneY</a></div><div class="ttdeci">static constexpr double kEndingZoneY</div><div class="ttdoc">エンディングに移行するY座標</div><div class="ttdef"><b>Definition</b> GameScene.h:121</div></div>
</div><!-- fragment --><div class="dynheader">
呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="class_game_scene_a70464c5d4ccd05d39a9cb168e332c93a_cgraph.svg" width="728" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a90075ad52095e3d625ae3aa13fada7e8" name="a90075ad52095e3d625ae3aa13fada7e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90075ad52095e3d625ae3aa13fada7e8">&#9670;&#160;</a></span>UpdateBGM()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GameScene::UpdateBGM </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>BGMを更新する </p>
<div class="fragment"><div class="line"><span class="lineno">  106</span>{</div>
<div class="line"><span class="lineno">  107</span>    <span class="comment">// pending 再生があれば毎フレームチェックして可能なら再生</span></div>
<div class="line"><span class="lineno">  108</span>    <a class="code hl_function" href="#aa563b355724487c1568bd4ab41c4d95d">ProcessPendingBGM</a>();</div>
<div class="line"><span class="lineno">  109</span> </div>
<div class="line"><span class="lineno">  110</span>    <span class="comment">//イントロが実際に再生されていて終了したらループBGMに切り替え</span></div>
<div class="line"><span class="lineno">  111</span>    <span class="keywordflow">if</span>(not <a class="code hl_variable" href="#a51bb879d96662711ff93191ab1396efe">is_intro_finished_</a>)</div>
<div class="line"><span class="lineno">  112</span>    {</div>
<div class="line"><span class="lineno">  113</span>        <span class="comment">// intro が現在再生中か再生済みかを current_playing_bgm_asset_で管理</span></div>
<div class="line"><span class="lineno">  114</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="#a8939149550ec6173266a918dbc3c675d">current_playing_bgm_asset_</a> == U<span class="stringliteral">&quot;deepsea_intro&quot;</span>)</div>
<div class="line"><span class="lineno">  115</span>        {</div>
<div class="line"><span class="lineno">  116</span>            <span class="keywordflow">if</span>(not <a class="code hl_variable" href="#aa6b380e426f6968c9fd2719b7305b350">bgm_controller_</a>.IsPlaying(U<span class="stringliteral">&quot;deepsea_intro&quot;</span>))</div>
<div class="line"><span class="lineno">  117</span>            {</div>
<div class="line"><span class="lineno">  118</span>                <a class="code hl_variable" href="#a51bb879d96662711ff93191ab1396efe">is_intro_finished_</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  119</span>                <a class="code hl_function" href="#a1717f5abe6408c41d43fc54a5e2c5314">StartOrDeferBGM</a>(U<span class="stringliteral">&quot;deepsea&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  120</span>            }</div>
<div class="line"><span class="lineno">  121</span>        }</div>
<div class="line"><span class="lineno">  122</span>        <span class="comment">// else: introまだ準備できてない／再生されてない -&gt; 待つ</span></div>
<div class="line"><span class="lineno">  123</span>    }</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span>    <span class="comment">// プレイヤーが死んだらBGMを停止</span></div>
<div class="line"><span class="lineno">  126</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.IsOxygenEmpty())</div>
<div class="line"><span class="lineno">  127</span>    {</div>
<div class="line"><span class="lineno">  128</span>        <a class="code hl_variable" href="#aa6b380e426f6968c9fd2719b7305b350">bgm_controller_</a>.StopAll();</div>
<div class="line"><span class="lineno">  129</span>        <a class="code hl_variable" href="#a8939149550ec6173266a918dbc3c675d">current_playing_bgm_asset_</a>.clear();</div>
<div class="line"><span class="lineno">  130</span>        <a class="code hl_variable" href="#a17bd10c9c9a893337f882ac2cc29fa2c">pending_bgm_asset_</a>.clear();</div>
<div class="line"><span class="lineno">  131</span>        <a class="code hl_variable" href="#a8d18c87d67bcb9a95a199f778abf1fdd">pending_bgm_loop_</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  132</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  133</span>    }</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span>    <span class="comment">// 深度に応じて音量を調整</span></div>
<div class="line"><span class="lineno">  136</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> total_travel = <a class="code hl_variable" href="#a15264bb76160d136a34c374410988428">map_total_height_</a> - <a class="code hl_variable" href="#ad923df88ccb29eab3d1f2bc2b461e833">player_start_pos_</a>.y;</div>
<div class="line"><span class="lineno">  137</span>    <span class="keywordflow">if</span>(total_travel &gt; 0)</div>
<div class="line"><span class="lineno">  138</span>    {</div>
<div class="line"><span class="lineno">  139</span>        <span class="keywordtype">double</span> depth_ratio = (<a class="code hl_variable" href="#a946044ac0695cd89013dd6c22335f394">player_</a>.GetPos().y - <a class="code hl_variable" href="#ad923df88ccb29eab3d1f2bc2b461e833">player_start_pos_</a>.y) / total_travel;</div>
<div class="line"><span class="lineno">  140</span>        depth_ratio = Clamp(depth_ratio, 0.0, 1.0);</div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span>        <span class="comment">// 深くなるほど音量を下げる</span></div>
<div class="line"><span class="lineno">  143</span>        <span class="keyword">const</span> <span class="keywordtype">double</span> volume = Math::Lerp(1.0, 0.0, depth_ratio);</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span>        <span class="comment">// 両方のBGMの音量を設定</span></div>
<div class="line"><span class="lineno">  146</span>        <a class="code hl_variable" href="#aa6b380e426f6968c9fd2719b7305b350">bgm_controller_</a>.SetVolume(U<span class="stringliteral">&quot;deepsea_intro&quot;</span>, volume);</div>
<div class="line"><span class="lineno">  147</span>        <a class="code hl_variable" href="#aa6b380e426f6968c9fd2719b7305b350">bgm_controller_</a>.SetVolume(U<span class="stringliteral">&quot;deepsea&quot;</span>, volume);</div>
<div class="line"><span class="lineno">  148</span>    }</div>
<div class="line"><span class="lineno">  149</span>}</div>
<div class="ttc" id="aclass_game_scene_html_aa563b355724487c1568bd4ab41c4d95d"><div class="ttname"><a href="#aa563b355724487c1568bd4ab41c4d95d">GameScene::ProcessPendingBGM</a></div><div class="ttdeci">void ProcessPendingBGM()</div><div class="ttdoc">保留中のBGM再生を処理する</div><div class="ttdef"><b>Definition</b> GameScene.cpp:58</div></div>
</div><!-- fragment --><div class="dynheader">
呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="class_game_scene_a90075ad52095e3d625ae3aa13fada7e8_cgraph.svg" width="459" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
被呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="class_game_scene_a90075ad52095e3d625ae3aa13fada7e8_icgraph.svg" width="372" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a name="doc-variable-members" id="doc-variable-members"></a><h2 id="header-doc-variable-members" class="groupheader">メンバ詳解</h2>
<a id="a880152ec2737823c876cd92d531c67b9" name="a880152ec2737823c876cd92d531c67b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a880152ec2737823c876cd92d531c67b9">&#9670;&#160;</a></span>background_activation_times_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;String, double&gt; GameScene::background_activation_times_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel mutable">mutable</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>背景オブジェクトのアクティブ化時刻 </p>

</div>
</div>
<a id="aa6b380e426f6968c9fd2719b7305b350" name="aa6b380e426f6968c9fd2719b7305b350"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6b380e426f6968c9fd2719b7305b350">&#9670;&#160;</a></span>bgm_controller_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sound_controller.html">SoundController</a> GameScene::bgm_controller_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>BGM制御 </p>

</div>
</div>
<a id="ae02f3fc820bd84d4ecaadaf2737e3e3e" name="ae02f3fc820bd84d4ecaadaf2737e3e3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae02f3fc820bd84d4ecaadaf2737e3e3e">&#9670;&#160;</a></span>camera_manager_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_camera_system.html">CameraSystem</a> GameScene::camera_manager_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>カメラシステム </p>

</div>
</div>
<a id="a2e50b365a5b44298a88b522c2b215382" name="a2e50b365a5b44298a88b522c2b215382"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e50b365a5b44298a88b522c2b215382">&#9670;&#160;</a></span>collision_manager_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_collision_system.html">CollisionSystem</a> GameScene::collision_manager_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>衝突判定システム </p>

</div>
</div>
<a id="a8939149550ec6173266a918dbc3c675d" name="a8939149550ec6173266a918dbc3c675d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8939149550ec6173266a918dbc3c675d">&#9670;&#160;</a></span>current_playing_bgm_asset_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">String GameScene::current_playing_bgm_asset_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>現在再生中のBGMアセット名 </p>

</div>
</div>
<a id="aa4789bb9a02b48fc4facf16962ca4a75" name="aa4789bb9a02b48fc4facf16962ca4a75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4789bb9a02b48fc4facf16962ca4a75">&#9670;&#160;</a></span>current_state_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_game_scene_8h.html#a7899b65f1ea0f655e4bbf8d2a5714285">GameState</a> GameScene::current_state_ = <a class="el" href="_game_scene_8h.html#a7899b65f1ea0f655e4bbf8d2a5714285ab78a3223503896721cca1303f776159b">GameState::Title</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>現在のゲーム状態 </p>

</div>
</div>
<a id="a72703a1b0603a5d7e1b24629995ad14d" name="a72703a1b0603a5d7e1b24629995ad14d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72703a1b0603a5d7e1b24629995ad14d">&#9670;&#160;</a></span>ending_start_time_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double GameScene::ending_start_time_ = -1.0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>エンディング開始からの経過時間 </p>

</div>
</div>
<a id="afce5ddb19d7e812786caad6456fbf97a" name="afce5ddb19d7e812786caad6456fbf97a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afce5ddb19d7e812786caad6456fbf97a">&#9670;&#160;</a></span>enemies_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">s3d::Array&lt;<a class="el" href="class_enemy.html">Enemy</a>&gt; GameScene::enemies_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>敵のリスト </p>

</div>
</div>
<a id="a51bb879d96662711ff93191ab1396efe" name="a51bb879d96662711ff93191ab1396efe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51bb879d96662711ff93191ab1396efe">&#9670;&#160;</a></span>is_intro_finished_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool GameScene::is_intro_finished_ = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>イントロが終了したか </p>

</div>
</div>
<a id="a1667d8b21db6a212188a718f85ebe73e" name="a1667d8b21db6a212188a718f85ebe73e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1667d8b21db6a212188a718f85ebe73e">&#9670;&#160;</a></span>kDeepSeaColor</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ColorF GameScene::kDeepSeaColor = ColorF{ 0.0, 0.1, 0.3 }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel constexpr">constexpr</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>深海の背景色 </p>
<div class="fragment"><div class="line"><span class="lineno">  112</span>{ 0.0, 0.1, 0.3 };</div>
</div><!-- fragment -->
</div>
</div>
<a id="acba19c430989f22697747e855c60cb1a" name="acba19c430989f22697747e855c60cb1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acba19c430989f22697747e855c60cb1a">&#9670;&#160;</a></span>kEndingDarkenAlpha</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double GameScene::kEndingDarkenAlpha = 0.45</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel constexpr">constexpr</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>笑顔後の画面暗転アルファ値 </p>

</div>
</div>
<a id="a64b8a743a881765b83832940b6a1f18c" name="a64b8a743a881765b83832940b6a1f18c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64b8a743a881765b83832940b6a1f18c">&#9670;&#160;</a></span>kEndingOverlayTexture</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">StringView GameScene::kEndingOverlayTexture = U&quot;ending_text&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel constexpr">constexpr</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>エンディング画像のアセット名 </p>

</div>
</div>
<a id="af61de4ec45054c4ad819aa667e2d6aab" name="af61de4ec45054c4ad819aa667e2d6aab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af61de4ec45054c4ad819aa667e2d6aab">&#9670;&#160;</a></span>kEndingZoneY</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double GameScene::kEndingZoneY = 7650.0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel constexpr">constexpr</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>エンディングに移行するY座標 </p>

</div>
</div>
<a id="aae92d7d7647fb42ea773a6820baffb1d" name="aae92d7d7647fb42ea773a6820baffb1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae92d7d7647fb42ea773a6820baffb1d">&#9670;&#160;</a></span>kOctopusSmileDelay</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double GameScene::kOctopusSmileDelay = 7.0 + 8.6</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel constexpr">constexpr</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>エンディング開始から笑顔に切り替わるまでの時間(秒) </p>

</div>
</div>
<a id="a5b0377e5605ea62f8779d2aa4f5e074f" name="a5b0377e5605ea62f8779d2aa4f5e074f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b0377e5605ea62f8779d2aa4f5e074f">&#9670;&#160;</a></span>kPlayingCameraOffsetYRatio</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double GameScene::kPlayingCameraOffsetYRatio = 1.0 / 6.0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel constexpr">constexpr</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>ゲームプレイ用のカメラオフセット比率 </p>

</div>
</div>
<a id="a65a5770ebd2e996edcdc27cac7a69b62" name="a65a5770ebd2e996edcdc27cac7a69b62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65a5770ebd2e996edcdc27cac7a69b62">&#9670;&#160;</a></span>kTitleEndingCameraOffsetYRatio</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double GameScene::kTitleEndingCameraOffsetYRatio = -1.0 / 4.9</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel constexpr">constexpr</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>タイトル・エンディング画面用のカメラオフセット比率 </p>

</div>
</div>
<a id="a15264bb76160d136a34c374410988428" name="a15264bb76160d136a34c374410988428"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15264bb76160d136a34c374410988428">&#9670;&#160;</a></span>map_total_height_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double GameScene::map_total_height_ = 0.0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>ステージの総高さ </p>

</div>
</div>
<a id="a09e7b014bdd0405bb6b240282b490d1e" name="a09e7b014bdd0405bb6b240282b490d1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09e7b014bdd0405bb6b240282b490d1e">&#9670;&#160;</a></span>oxygen_spots_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">s3d::Array&lt;<a class="el" href="class_oxygen_spot.html">OxygenSpot</a>&gt; GameScene::oxygen_spots_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>酸素スポットのリスト </p>

</div>
</div>
<a id="a17bd10c9c9a893337f882ac2cc29fa2c" name="a17bd10c9c9a893337f882ac2cc29fa2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17bd10c9c9a893337f882ac2cc29fa2c">&#9670;&#160;</a></span>pending_bgm_asset_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">String GameScene::pending_bgm_asset_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>保留中のBGMアセット名 </p>

</div>
</div>
<a id="a8d18c87d67bcb9a95a199f778abf1fdd" name="a8d18c87d67bcb9a95a199f778abf1fdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d18c87d67bcb9a95a199f778abf1fdd">&#9670;&#160;</a></span>pending_bgm_loop_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool GameScene::pending_bgm_loop_ = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>保留中のBGMループフラグ </p>

</div>
</div>
<a id="a946044ac0695cd89013dd6c22335f394" name="a946044ac0695cd89013dd6c22335f394"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a946044ac0695cd89013dd6c22335f394">&#9670;&#160;</a></span>player_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_player.html">Player</a> GameScene::player_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>プレイヤー </p>

</div>
</div>
<a id="ad923df88ccb29eab3d1f2bc2b461e833" name="ad923df88ccb29eab3d1f2bc2b461e833"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad923df88ccb29eab3d1f2bc2b461e833">&#9670;&#160;</a></span>player_start_pos_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Vec2 GameScene::player_start_pos_ = Vec2::Zero()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>プレイヤーの開始位置 </p>

</div>
</div>
<a id="a6fbc09fbe0d70c9dd0eb4e54f868b0ed" name="a6fbc09fbe0d70c9dd0eb4e54f868b0ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fbc09fbe0d70c9dd0eb4e54f868b0ed">&#9670;&#160;</a></span>stage_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_stage.html">Stage</a> GameScene::stage_ { U&quot;asset/<a class="el" href="class_stage.html">Stage</a>/v3/tilemap_v3.json&quot;, U&quot;asset/<a class="el" href="class_stage.html">Stage</a>/v3/tileset.png&quot;, U&quot;collision_layer&quot; }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>ステージ </p>
<div class="fragment"><div class="line"><span class="lineno">   67</span>{ U<span class="stringliteral">&quot;asset/Stage/v3/tilemap_v3.json&quot;</span>, U<span class="stringliteral">&quot;asset/Stage/v3/tileset.png&quot;</span>, U<span class="stringliteral">&quot;collision_layer&quot;</span> };</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac86ef266e524e23cde48487fa5e68cbd" name="ac86ef266e524e23cde48487fa5e68cbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac86ef266e524e23cde48487fa5e68cbd">&#9670;&#160;</a></span>ui_manager_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_u_i_system.html">UISystem</a> GameScene::ui_manager_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>UIシステム </p>

</div>
</div>
<hr/>このクラス詳解は次のファイルから抽出されました:<ul>
<li>src/Scene/<a class="el" href="_game_scene_8h_source.html">GameScene.h</a></li>
<li>src/Scene/<a class="el" href="_game_scene_8cpp.html">GameScene.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="class_game_scene.html">GameScene</a></li>
    <li class="footer">構築: <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
